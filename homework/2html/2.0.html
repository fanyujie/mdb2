<!DOCTYPE html>
<!-- Created by pdf2htmlEX (https://github.com/coolwanglu/pdf2htmlex) -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8"/>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<link rel="stylesheet" href="base.min.css"/>
<link rel="stylesheet" href="fancy.min.css"/>
<link rel="stylesheet" href="main.css"/>
<script src="compatibility.min.js"></script>
<script src="theViewer.min.js"></script>
<script>
try{
theViewer.defaultViewer = new theViewer.Viewer({});
}catch(e){}
</script>
<title></title>
</head>
<body>
<div id="sidebar">
<div id="outline">
</div>
</div>
<div id="page-container">
<div id="pf1" class="pf w0 h0" data-page-no="1"><div class="pc pc1 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg1.png"/><div class="t m0 x1 h2 y1 ff1 fs0 fc0 sc0 ls0 ws0">重<span class="_ _0"></span>庆<span class="_ _0"></span>交<span class="_ _0"></span>通<span class="_ _0"></span>大<span class="_ _0"></span>学<span class="_ _0"></span>信<span class="_ _0"></span>息<span class="_ _0"></span>科<span class="_ _0"></span>学<span class="_ _0"></span>与<span class="_ _0"></span>工<span class="_ _0"></span>程<span class="_ _0"></span>学<span class="_ _0"></span>院</div><div class="t m0 x1 h2 y2 ff1 fs0 fc0 sc0 ls0 ws0">实<span class="_ _1"> </span>验<span class="_ _1"> </span>报<span class="_ _1"> </span>告</div><div class="t m0 x2 h3 y3 ff1 fs1 fc0 sc0 ls0 ws0">班<span class="ff2 sc1">        <span class="_ _2"> </span></span>级：<span class="ff3 sc1">        <span class="_ _2"> </span><span class="ff4">曙光<span class="_ _3"> </span></span>1901  <span class="ff4">班</span>          </span></div><div class="t m0 x2 h3 y4 ff1 fs1 fc0 sc0 ls0 ws0">姓名<span class="ff2 sc1">    <span class="_ _4"> </span></span>学号：<span class="ff3 sc1">    <span class="_ _4"> </span><span class="ff4">樊宇杰</span>  631907060603        </span></div><div class="t m0 x2 h3 y5 ff1 fs1 fc0 sc0 ls0 ws0">实验项目<span class="_ _0"></span>名称：<span class="ff2 sc1">   <span class="_ _5"> </span><span class="ff4">计算机网络<span class="ff3">  wireshark     </span></span></span></div><div class="t m0 x2 h3 y6 ff1 fs1 fc0 sc0 ls0 ws0">实验项目<span class="_ _0"></span>性质：<span class="ff3 sc1">             <span class="_ _6"> </span><span class="ff4">验证性</span>            </span></div><div class="t m0 x2 h3 y7 ff1 fs1 fc0 sc0 ls0 ws0">实验所属<span class="_ _0"></span>课程：<span class="ff3 sc1">       <span class="_ _7"> </span><span class="ff4">计算机网络</span>         </span></div><div class="t m0 x2 h3 y8 ff1 fs1 fc0 sc0 ls0 ws0">实验室<span class="ff2 sc1">(</span>中<span class="_ _0"></span>心<span class="ff2 sc1">)</span>：<span class="ff3 sc1">         <span class="_ _8"> </span><span class="ff4">计算中心三机房</span>         </span></div><div class="t m0 x2 h3 y9 ff1 fs1 fc0 sc0 ls0 ws0">指<span class="ff2 sc1">  </span>导<span class="ff2 sc1">  </span>教<span class="ff2 sc1">  </span>师<span class="_ _0"></span><span class="ff2 sc1">  </span>：<span class="ff3 sc1">            <span class="_ _9"> </span><span class="ff4">王勇</span>          </span></div><div class="t m0 x2 h3 ya ff1 fs1 fc0 sc0 ls0 ws0">实验完成<span class="_ _0"></span>时间：<span class="ff2 sc1">  <span class="ff3">  2020   <span class="_ _5"> </span></span></span>年<span class="ff3 sc1">  <span class="_ _a"> </span>10  <span class="_ _a"> </span></span>月<span class="ff3 sc1">  <span class="_ _a"> </span>16  <span class="_ _a"> </span></span>日</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf2" class="pf w0 h0" data-page-no="2"><div class="pc pc2 w0 h0"><img class="bi x3 yb w2 h4" alt="" src="bg2.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 1 -</div></div><div class="t m0 x6 h7 ye ff1 fs3 fc0 sc0 ls0 ws0">一、实验概<span class="_ _0"></span>述：</div><div class="t m0 x6 h8 yf ff1 fs4 fc0 sc0 ls0 ws0">【实验目的】</div><div class="t m0 x6 h8 y10 ff3 fs4 fc0 sc1 ls0 ws0">1.<span class="_ _b"> </span><span class="ff4">了解</span></div><div class="t m0 x6 h9 y11 ff6 fs4 fc0 sc1 ls0 ws0">本部分按照数据链路层、网络层、传输层以及应用层进行分类，共有<span class="ff3">  10  </span>个实验。需要</div><div class="t m0 x6 h9 y12 ff6 fs4 fc0 sc1 ls0 ws0">使用协议分析软件<span class="ff3">  Wireshark  </span>进行，请根据简介部分自行下载安装。</div><div class="t m0 x6 h8 y13 ff3 fs4 fc0 sc1 ls0 ws0">2.<span class="_ _b"> </span><span class="ff4">掌握</span></div><div class="t m0 x6 h8 y14 ff3 fs4 fc0 sc1 ls0 ws0">3.<span class="_ _b"> </span><span class="ff4">掌握</span></div><div class="t m0 x6 h8 y15 ff1 fs4 fc0 sc0 ls0 ws0">【实施环境】<span class="_ _0"></span>（使用的材料、设备、<span class="_ _0"></span>软件）</div><div class="t m0 x6 h8 y16 ff4 fs4 fc0 sc1 ls0 ws0">准备</div><div class="t m0 x6 h8 y17 ff4 fs4 fc0 sc1 ls0 ws0">请自行查找或使用如下参考资料，了解<span class="ff3">  Wireshark  </span>的基本使用：</div><div class="t m0 x6 h8 y18 ff4 fs4 fc0 sc1 ls0 ws0">选择对哪块网卡进行数据包捕获</div><div class="t m0 x6 h8 y19 ff4 fs4 fc0 sc1 ls0 ws0">开始<span class="ff3">/</span>停止捕获</div><div class="t m0 x6 h8 y1a ff4 fs4 fc0 sc1 ls0 ws0">了解<span class="ff3">  Wireshark  </span>主要窗口区域</div><div class="t m0 x6 h8 y1b ff4 fs4 fc0 sc1 ls0 ws0">设置数据包的过滤</div><div class="t m0 x6 h8 y1c ff4 fs4 fc0 sc1 ls0 ws0">跟踪数据流</div><div class="t m0 x6 h7 y1d ff1 fs3 fc0 sc0 ls0 ws0">二、实验内<span class="_ _0"></span>容</div><div class="t m0 x6 h8 y1e ff1 fs4 fc0 sc0 ls0 ws0">第<span class="_ _c"> </span><span class="ff2 sc1">1 </span>题<span class="ff2 sc1">  <span class="ff7">数据<span class="ff8">链</span>路<span class="ff8">层</span></span></span></div><div class="t m0 x6 h8 y1f ff4 fs4 fc0 sc1 ls0 ws0">【实验过程】（步骤、记录、数据、程序等）</div><div class="t m0 x6 h8 y20 ff1 fs4 fc0 sc0 ls0 ws0">实作一<span class="ff2 sc1">  </span>熟悉<span class="ff2 sc1">  Ethernet  </span>帧<span class="_ _0"></span>结构</div><div class="t m0 x6 h8 y21 ff4 fs4 fc0 sc1 ls0 ws0">使用<span class="ff3">  Wireshark  </span>任意进行抓包，熟悉<span class="ff3">  Ethernet  </span>帧的结构，如：目的<span class="ff3">  MAC</span>、源<span class="ff3">  MAC</span>、</div><div class="t m0 x6 h8 y22 ff4 fs4 fc0 sc1 ls0 ws0">类型、字段等。</div><div class="t m0 x6 ha y23 ff6 fs5 fc0 sc1 ls0 ws0">减去前三个属性的字节剩下就是数据<span class="ff3">(</span>字段<span class="ff3">)</span></div><div class="t m0 x6 h8 y24 ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf3" class="pf w0 h0" data-page-no="3"><div class="pc pc3 w0 h0"><img class="bi x3 y25 w4 hb" alt="" src="bg3.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 2 -</div></div><div class="t m0 x6 h8 y26 ff4 fs4 fc0 sc1 ls0 ws0">你会发现<span class="ff3">  Wireshark  </span>展现给我们的帧中没有校验字段，请了解一下原因。</div><div class="t m0 x6 h8 yf ff4 fs4 fc0 sc1 ls0 ws0">校验字段可能已经被使用并且默认在接收时脱去了</div><div class="t m0 x6 h8 y11 ff1 fs4 fc0 sc0 ls0 ws0">实作二<span class="ff2 sc1">  </span>了解子<span class="_ _0"></span>网内<span class="ff2 sc1">/</span>外通信时的<span class="ff2 sc1">  MAC  </span>地址</div><div class="t m0 x6 h8 y12 ff3 fs4 fc0 sc1 ls0 ws0">ping  <span class="ff4">你<span class="_ _0"></span>旁边的计<span class="_ _0"></span>算机（<span class="_ _0"></span>同一子网<span class="_ _0"></span>），同<span class="_ _0"></span>时用</span>  Wireshark <span class="_ _d"> </span><span class="ff4">抓这<span class="_ _0"></span>些包（可<span class="_ _0"></span>使用</span> <span class="_ _c"> </span>icmp <span class="_ _d"> </span><span class="ff4">关键</span></div><div class="t m0 x6 h8 y13 ff4 fs4 fc0 sc1 ls0 ws0">字<span class="_ _0"></span>进行<span class="_ _0"></span>过滤<span class="_ _0"></span>以利<span class="_ _0"></span>于分<span class="_ _0"></span>析<span class="_ _0"></span>），<span class="_ _0"></span>记录<span class="_ _0"></span>一下<span class="_ _0"></span>发出<span class="_ _0"></span>帧的<span class="_ _0"></span>目<span class="_ _0"></span>的<span class="ff3"> <span class="_ _d"> </span>MAC <span class="_ _c"> </span></span>地<span class="_ _0"></span>址<span class="_ _0"></span>以及<span class="_ _0"></span>返回<span class="_ _0"></span>帧的<span class="_ _0"></span>源<span class="ff3"> <span class="_ _d"> </span>MAC </span></div><div class="t m0 x6 h8 y27 ff4 fs4 fc0 sc1 ls0 ws0">地址是多少？这个<span class="ff3">  MAC  </span>地址是谁的？</div><div class="t m0 x6 h8 y28 ff4 fs4 fc0 sc1 ls0 ws0">这个<span class="_ _c"> </span><span class="ff3">mac </span>是对方主机的</div><div class="t m0 x6 hc y29 ff3 fs4 fc0 sc1 ls0 ws0">Ethernet <span class="_ _b"> </span>II, <span class="_ _e"> </span>Src: <span class="_ _e"> </span>IntelCor_5e:40:89 <span class="_ _b"> </span>(f4:d1:08:5e:40:89), <span class="_ _e"> </span>Dst: <span class="_ _b"> </span>IntelCor_77:72:d4 </div><div class="t m0 x6 hc y2a ff3 fs4 fc0 sc1 ls0 ws0">(38:00:25:77:72:d4)</div><div class="t m0 x6 hc y2b ff3 fs4 fc0 sc1 ls0 ws0">Ethernet <span class="_ _f"> </span>II, <span class="_ _f"> </span>Src: <span class="_ _f"> </span>IntelCor_77:72:d4 <span class="_ _f"> </span>(<span class="ff2">38:00:25:77:72:d4</span>), <span class="_ _f"> </span>Dst: <span class="_ _f"> </span>IntelCor_5e:40:89 </div><div class="t m0 x6 hc y2c ff3 fs4 fc0 sc1 ls0 ws0">(<span class="ff2">f4:d1:08:5e:40:89</span>)</div><div class="t m0 x6 h8 y19 ff3 fs4 fc0 sc1 ls0 ws0">f4:d1:08:5e:40:89  <span class="ff4">为本机</span>  wifi <span class="ff4">网卡<span class="_ _c"> </span></span>mac <span class="ff4">地址</span></div><div class="t m0 x6 h8 y1a ff3 fs4 fc0 sc1 ls0 ws0">38:00:25:77:72:d4 <span class="ff4">为对方<span class="_ _c"> </span></span>Wifi <span class="ff4">网卡<span class="_ _c"> </span></span>mac <span class="ff4">地址</span></div><div class="t m0 x6 h8 y1c ff4 fs4 fc0 sc1 ls0 ws0">然后<span class="ff3">  ping qige.io  </span>（或者本子网外的主机都可以）<span class="_ _10"></span>，<span class="_ _11"></span>同时用<span class="ff3">  Wireshark  </span>抓这些包<span class="_ _11"></span>（可<span class="ff3">  icmp </span></div><div class="t m0 x6 h8 y2d ff4 fs4 fc0 sc1 ls0 ws0">过滤）<span class="_ _0"></span>，记录一下发<span class="_ _0"></span>出帧的目的<span class="ff3"> <span class="_ _d"> </span>MAC  </span>地址以<span class="_ _0"></span>及返回帧的源<span class="_ _0"></span><span class="ff3">  MAC  </span>地址是<span class="_ _0"></span>多少？这个<span class="ff3"> </span></div><div class="t m0 x6 h8 y2e ff3 fs4 fc0 sc1 ls0 ws0">MAC  <span class="ff4">地址是谁的？</span></div><div class="t m0 x6 hc y2f ff3 fs4 fc0 sc1 ls0 ws0">Ethernet <span class="_ _12"> </span>II, <span class="_ _12"> </span>Src: <span class="_ _12"> </span>Qualcomm_00:00:16 <span class="_ _12"> </span>(00:a0:c6:00:00:16), <span class="_ _12"> </span>Dst: <span class="_ _12"> </span>ASUSTekC_9a:a4:00 </div><div class="t m0 x6 hc y30 ff3 fs4 fc0 sc1 ls0 ws0">(00:1b:fc:9a:a4:00)</div><div class="t m0 x6 hc y31 ff3 fs4 fc0 sc1 ls0 ws0">Ethernet <span class="_ _13"> </span>II, <span class="_ _13"> </span>Src: <span class="_ _13"> </span>ASUSTekC_9a:a4:00 <span class="_ _13"> </span>(00:1b:fc:9a:a4:00), <span class="_ _13"> </span>Dst: <span class="_ _13"> </span>Qualcomm_00:00:16 </div><div class="t m0 x6 hc y32 ff3 fs4 fc0 sc1 ls0 ws0">(00:a0:c6:00:00:16)</div><div class="t m0 x6 h8 y33 ff3 fs4 fc0 sc1 ls0 ws0">(00:a0:c6:00:00:16)<span class="ff4">为本机移动网卡物理地址</span></div><div class="t m0 x6 h8 y34 ff3 fs4 fc0 sc1 ls0 ws0">(00:1b:fc:9a:a4:00)<span class="ff4">这个<span class="_ _c"> </span></span>mac <span class="ff4">地址是帧通过网关的物理地址</span></div><div class="t m0 x6 h8 y35 ff4 fs4 fc0 sc1 ls0 ws0">再次<span class="_ _0"></span><span class="ff3">  ping www.cqjtu.edu.cn  </span>（<span class="_ _0"></span>或者本<span class="_ _0"></span>子网外的<span class="_ _0"></span>主机都<span class="_ _0"></span>可以），<span class="_ _0"></span>同时用<span class="_ _0"></span><span class="ff3">  Wireshark  </span>抓<span class="_ _0"></span>这</div><div class="t m0 x6 h8 y36 ff4 fs4 fc0 sc1 ls0 ws0">些包（<span class="_ _0"></span>可<span class="ff3">  icmp  </span>过滤）<span class="_ _0"></span>，记录一下<span class="_ _0"></span>发出帧的目的<span class="_ _0"></span><span class="ff3">  MAC  </span>地址以<span class="_ _0"></span>及返回帧的源<span class="_ _0"></span><span class="ff3">  MAC  </span>地</div><div class="t m0 x6 h8 y37 ff4 fs4 fc0 sc1 ls0 ws0">址又是多少？这个<span class="ff3">  MAC  </span>地址又是谁的？</div><div class="t m0 x6 hc y38 ff3 fs4 fc0 sc1 ls0 ws0">Ethernet <span class="_ _12"> </span>II, <span class="_ _12"> </span>Src: <span class="_ _12"> </span>Qualcomm_00:00:16 <span class="_ _12"> </span>(00:a0:c6:00:00:16), <span class="_ _12"> </span>Dst: <span class="_ _12"> </span>ASUSTekC_9a:a4:00 </div><div class="t m0 x6 hc y39 ff3 fs4 fc0 sc1 ls0 ws0">(00:1b:fc:9a:a4:00)</div><div class="t m0 x6 hc y3a ff3 fs4 fc0 sc1 ls0 ws0">Ethernet <span class="_ _13"> </span>II, <span class="_ _13"> </span>Src: <span class="_ _13"> </span>ASUSTekC_9a:a4:00 <span class="_ _13"> </span>(00:1b:fc:9a:a4:00), <span class="_ _13"> </span>Dst: <span class="_ _13"> </span>Qualcomm_00:00:16 </div><div class="t m0 x6 hc y3b ff3 fs4 fc0 sc1 ls0 ws0">(00:a0:c6:00:00:16)</div><div class="t m0 x6 h8 y3c ff3 fs4 fc0 sc1 ls0 ws0">(00:a0:c6:00:00:16)<span class="ff4">为本机移动网卡物理地址</span></div><div class="t m0 x6 h8 y3d ff3 fs4 fc0 sc1 ls0 ws0">(00:1b:fc:9a:a4:00)<span class="ff4">这个<span class="_ _c"> </span></span>mac <span class="ff4">地址是帧通过网关的物理地址</span></div><div class="t m0 x6 h8 y3e ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf4" class="pf w0 h0" data-page-no="4"><div class="pc pc4 w0 h0"><img class="bi x3 y3f w5 hd" alt="" src="bg4.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 3 -</div></div><div class="t m0 x6 h8 y11 ff4 fs4 fc0 sc1 ls0 ws0">通过以上的实验，你会发现：</div><div class="t m0 x6 h8 y13 ff4 fs4 fc0 sc1 ls0 ws0">访问本子网的计算机时，目的<span class="ff3">  MAC  </span>就是该主机的</div><div class="t m0 x6 h8 y14 ff4 fs4 fc0 sc1 ls0 ws0">访问非本子网的计算机时，目的<span class="ff3">  MAC  </span>是网关的</div><div class="t m0 x6 h8 y28 ff4 fs4 fc0 sc1 ls0 ws0">请问原因是什么？</div><div class="t m0 x6 h8 y15 ff4 fs4 fc0 sc1 ls0 ws0">是链路层点到点的性质决定的</div><div class="t m0 x6 h8 y16 ff4 fs4 fc0 sc1 ls0 ws0">访问本网的计算机时不需要经过网关<span class="ff3">  (</span>两点分别为本地主机和对方主机<span class="ff3">)</span></div><div class="t m0 x6 h8 y17 ff4 fs4 fc0 sc1 ls0 ws0">而访问外网的计算机需要经过网关<span class="ff3">(</span>两点分别为本地主机和网关<span class="ff3">)</span></div><div class="t m0 x6 h8 y18 ff4 fs4 fc0 sc1 ls0 ws0">本地子网的计算机时<span class="ff3">,</span></div><div class="t m0 x6 h8 y1a ff1 fs4 fc0 sc0 ls0 ws0">实作三<span class="ff2 sc1">  </span>掌握<span class="ff2 sc1">  ARP  </span>解<span class="_ _0"></span>析过程</div><div class="t m0 x6 h8 y1b ff4 fs4 fc0 sc1 ls0 ws0">为防止干扰，先使用<span class="ff3">  arp -d *  </span>命令清空<span class="ff3">  arp  </span>缓存</div><div class="t m0 x6 h8 y1c ff3 fs4 fc0 sc1 ls0 ws0">ping  <span class="ff4">你旁边的计算机（同<span class="_ _0"></span>一子网），同时用</span>  Wireshark  <span class="ff4">抓这些包（可</span> <span class="_ _c"> </span>arp  <span class="ff4">过<span class="_ _0"></span>滤），查</span></div><div class="t m0 x6 h8 y2d ff4 fs4 fc0 sc1 ls0 ws0">看<span class="ff3">  ARP  </span>请求的格式以及请求的内容，注意观察该请求的目的<span class="ff3">  MAC  </span>地址是什么。再查</div><div class="t m0 x6 h8 y2e ff4 fs4 fc0 sc1 ls0 ws0">看一下该请求的回应，注意观察该回应的源<span class="ff3">  MAC  </span>和目的<span class="ff3">  MAC  </span>地址是什么。</div><div class="t m0 x6 ha y40 ff6 fs5 fc0 sc1 ls0 ws0">请求的目的地址为<span class="ff3">  Destination: Broadcast (ff:ff:ff:ff:ff:ff)  </span>广播</div><div class="t m0 x6 ha y41 ff6 fs5 fc0 sc1 ls0 ws0">回<span class="_ _14"> </span>复<span class="_ _14"> </span>的<span class="_ _14"> </span>起<span class="_ _14"> </span>始<span class="_ _14"> </span>地<span class="_ _14"> </span>址<span class="_ _14"> </span><span class="ff3"> <span class="_ _15"> </span>Src:  IntelCor_77:72:d4  (38:00:25:77:72:d4), </span>目<span class="_ _14"> </span>的<span class="_ _14"> </span>地<span class="_ _14"> </span>址<span class="_ _14"> </span><span class="ff3"> <span class="_ _15"> </span>Dst:<span class="_ _16"></span>  IntelCor_5e:40:89 </span></div><div class="t m0 x6 he y42 ff3 fs5 fc0 sc1 ls0 ws0">(f4:d1:08:5e:40:89)</div><div class="t m0 x6 h8 y43 ff4 fs4 fc0 sc1 ls0 ws0">再次使用<span class="ff3">  arp -d *  </span>命令清空<span class="ff3">  arp  </span>缓存</div><div class="t m0 x6 h8 y44 ff4 fs4 fc0 sc1 ls0 ws0">然后<span class="ff3">  ping qige.io  </span>（或者本子网外的主机都可以），同时用<span class="ff3">  Wireshark  </span>抓这些包（可<span class="ff3">  arp </span></div><div class="t m0 x6 h8 y45 ff4 fs4 fc0 sc1 ls0 ws0">过滤）。查看这次<span class="ff3">  ARP  </span>请求的是什么，注意观察该请求是谁在回应。</div><div class="t m0 x6 h8 y46 ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf5" class="pf w0 h0" data-page-no="5"><div class="pc pc5 w0 h0"><img class="bi x3 y47 w5 hf" alt="" src="bg5.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 4 -</div></div><div class="t m0 x6 ha y48 ff6 fs5 fc0 sc1 ls0 ws0">请求的目的地址为<span class="ff3">  Destination: Broadcast (ff:ff:ff:ff:ff:ff)  </span>广播</div><div class="t m0 x6 ha y49 ff6 fs5 fc0 sc1 ls0 ws0">回应的起始地址<span class="_ _14"> </span><span class="ff3">Src: 36:f2:75:34:14:e2 (36:f2:75:34:14:e2),</span></div><div class="t m0 x6 ha y4a ff3 fs5 fc0 sc1 ls0 ws0">  <span class="ff6">目标地址</span>:Dst: IntelCor_5e:40:89 (f4:d1:08:5e:40:89) (<span class="ff6">为网关<span class="_ _14"> </span></span>mac <span class="ff6">地址</span>)</div><div class="t m0 x6 h8 y15 ff4 fs4 fc0 sc1 ls0 ws0">通过以上的实验，你应该会发现，</div><div class="t m0 x6 h8 y16 ff3 fs4 fc0 sc1 ls0 ws0">ARP  <span class="ff4">请求都是使用广播方式发送的</span></div><div class="t m0 x6 h8 y17 ff4 fs4 fc0 sc1 ls0 ws0">如果访问的是本子网的<span class="ff3">  IP</span>，那么<span class="ff3">  ARP  </span>解析将直接得到该<span class="ff3">  IP  </span>对应的<span class="ff3">  MAC</span>；如果访问</div><div class="t m0 x6 h8 y4b ff4 fs4 fc0 sc1 ls0 ws0">的非本子网的<span class="ff3">  IP</span>，<span class="ff3">  </span>那么<span class="ff3">  ARP  </span>解析将得到网关的<span class="ff3">  MAC</span>。</div><div class="t m0 x6 h8 y18 ff4 fs4 fc0 sc1 ls0 ws0">请问为什么？</div><div class="t m0 x7 h8 y1a ff4 fs4 fc0 sc1 ls0 ws0">主机发送信息时将包含目标<span class="_ _c"> </span><span class="ff3">IP </span>地址的<span class="_ _c"> </span><span class="ff3">ARP </span>请求广播到局域网络上的所有主机，<span class="_ _17"></span>并</div><div class="t m0 x6 h8 y4c ff4 fs4 fc0 sc1 ls0 ws0">接收<span class="_ _0"></span>返回消息<span class="_ _0"></span>，以此<span class="_ _0"></span>确定目标<span class="_ _0"></span>的物理<span class="_ _0"></span>地址；收<span class="_ _0"></span>到返回<span class="_ _0"></span>消息后将<span class="_ _0"></span>该<span class="_ _c"> </span><span class="ff3">IP </span>地址<span class="_ _0"></span>和物理<span class="_ _0"></span>地址存</div><div class="t m0 x6 h8 y4d ff4 fs4 fc0 sc1 ls0 ws0">入本机<span class="_ _c"> </span><span class="ff3">ARP </span>缓存中并保留一定时间，下次请求时直接查询<span class="_ _c"> </span><span class="ff3">ARP </span>缓存以节约资源。</div><div class="t m0 x8 h8 y4e ff3 fs4 fc0 sc1 ls0 ws0">Arp <span class="ff4">工作在链路层</span>  <span class="ff4">，是点到点的服务</span>,<span class="ff4">访问子网的<span class="_ _c"> </span></span>ip <span class="ff4">时需要通过路由器</span>,<span class="ff4">即点的两端</span></div><div class="t m0 x6 h8 y4f ff4 fs4 fc0 sc1 ls0 ws0">为子网两台主机<span class="ff3">,</span>而访问外网<span class="_ _c"> </span><span class="ff3">ip </span>是首先要经过路由器<span class="ff3">,</span>即点的两端为主机与路由器</div><div class="t m0 x6 h8 y50 ff1 fs4 fc0 sc0 ls0 ws0">第<span class="_ _c"> </span><span class="ff2 sc1">2 </span>题<span class="ff2 sc1">  </span>网络层</div><div class="t m0 x6 h8 y51 ff4 fs4 fc0 sc1 ls0 ws0">【实验过程】（步骤、记录、数据、程序等）</div><div class="t m0 x6 h8 y52 ff4 fs4 fc0 sc1 ls0 ws0">实作一<span class="ff3">  </span>熟悉<span class="ff3">  IP  </span>包结构</div><div class="t m0 x6 h8 y53 ff4 fs4 fc0 sc1 ls0 ws0">使用<span class="ff3">  Wireshark  </span>任意进行抓包（可用<span class="ff3">  ip  </span>过滤），熟悉<span class="ff3">  IP  </span>包的结构，如：版本、头部</div><div class="t m0 x6 h8 y54 ff4 fs4 fc0 sc1 ls0 ws0">长度、总长度、<span class="ff3">TTL</span>、协议类型等字段。</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf6" class="pf w0 h0" data-page-no="6"><div class="pc pc6 w0 h0"><img class="bi x3 y55 w6 h10" alt="" src="bg6.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 5 -</div></div><div class="t m0 x6 ha y56 ff3 fs5 fc0 sc1 ls0 ws0">45(<span class="ff6">高<span class="_ _14"> </span></span>4 <span class="ff6">位为版本</span>  <span class="ff6">低<span class="_ _14"> </span></span>4 <span class="ff6">位为头部长度</span>) </div><div class="t m0 x6 ha y57 ff3 fs5 fc0 sc1 ls0 ws0">00(<span class="ff6">差分服务字段</span>)</div><div class="t m0 x6 ha y58 ff3 fs5 fc0 sc1 ls0 ws0">00 28(<span class="ff6">总长度</span>  <span class="ff6">这里为<span class="_ _14"> </span></span>40)</div><div class="t m0 x6 ha y59 ff3 fs5 fc0 sc1 ls0 ws0">b1 0c(<span class="ff6">标识</span>)</div><div class="t m0 x6 ha y5a ff3 fs5 fc0 sc1 ls0 ws0">40(<span class="ff6">标志</span>)</div><div class="t m0 x6 ha y5b ff3 fs5 fc0 sc1 ls0 ws0">00(<span class="ff6">段落偏移</span>)</div><div class="t m0 x6 he y5c ff3 fs5 fc0 sc1 ls0 ws0">80(ttl)</div><div class="t m0 x6 ha y5d ff3 fs5 fc0 sc1 ls0 ws0">06(<span class="ff6">协议类型</span>  tcp)</div><div class="t m0 x6 ha y5e ff3 fs5 fc0 sc1 ls0 ws0">0f 4b (<span class="ff6">头校验和</span>)</div><div class="t m0 x6 ha y5f ff3 fs5 fc0 sc1 ls0 ws0">64 30 ab d3(<span class="ff6">目标地址</span>)</div><div class="t m0 x6 ha y60 ff3 fs5 fc0 sc1 ls0 ws0">2b 84 fe f0(<span class="ff6">源地址</span>)</div><div class="t m0 x6 ha y61 ff3 fs5 fc0 sc1 ls0 ws0">c7 d8 c9 3f d9 4d 92 f2 f0 c4 46 51 50 10 02 02 3e eb 00 00(<span class="ff6">内容</span>)</div><div class="t m0 x6 he y62 ff3 fs5 fc0 sc1 ls0 ws0">                               <span class="_ _18"> </span>+...</div><div class="t m0 x6 he y63 ff3 fs5 fc0 sc1 ls0 ws0">                                  <span class="_ _19"> </span>+...</div><div class="t m0 x6 h8 y64 ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div><div class="t m0 x6 h8 y65 ff4 fs4 fc0 sc1 ls0 ws0">为提高效率，我们应该让<span class="ff3">  IP  </span>的头部尽可能的精简。但在如此珍贵的<span class="ff3">  IP  </span>头部你会发现</div><div class="t m0 x6 h8 y66 ff4 fs4 fc0 sc1 ls0 ws0">既有头部长度字段，也有总长度字段。请问为什么？</div><div class="t m0 x6 h8 y43 ff3 fs4 fc0 sc1 ls0 ws0">IP <span class="ff4">数据报首部的可变</span>,<span class="ff4">有了总长度字段和头部长度字段</span>,<span class="ff4">就可以方便获取数据部分的内容</span></div><div class="t m0 x6 h8 y67 ff4 fs4 fc0 sc1 ls0 ws0">实作二<span class="ff3">  IP  </span>包的分段与重组</div><div class="t m0 x6 h8 y68 ff4 fs4 fc0 sc1 ls0 ws0">根据规定，一个<span class="ff3">  IP  </span>包最大可以有<span class="ff3">  64K  </span>字节。但由于<span class="ff3">  Ethernet  </span>帧的限制，当<span class="ff3">  IP  </span>包的</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf7" class="pf w0 h0" data-page-no="7"><div class="pc pc7 w0 h0"><img class="bi x3 y69 w5 h11" alt="" src="bg7.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 6 -</div></div><div class="t m0 x6 h8 y6a ff4 fs4 fc0 sc1 ls0 ws0">数据超过<span class="ff3">  1500  </span>字节时就会被发送方的数据链路层分段，然后在接收方的网络层重组。</div><div class="t m0 x6 h8 yf ff4 fs4 fc0 sc1 ls0 ws0">缺<span class="_ _1a"> </span>省<span class="_ _1a"> </span>的<span class="_ _1a"> </span>，<span class="_ _1a"> </span><span class="ff3">ping <span class="_ _15"> </span></span>命<span class="_ _1a"> </span>令<span class="_ _1a"> </span>只<span class="_ _1a"> </span>会<span class="_ _1a"> </span>向<span class="_ _1a"> </span>对<span class="_ _1a"> </span>方<span class="_ _1a"> </span>发<span class="_ _1a"> </span>送<span class="_ _1a"> </span><span class="ff3"> <span class="_ _15"> </span>32 <span class="_ _1b"> </span></span>个<span class="_ _1a"> </span>字<span class="_ _1a"> </span>节<span class="_ _1a"> </span>的<span class="_ _1a"> </span>数<span class="_ _1a"> </span>据<span class="_ _1a"> </span>。<span class="_ _1a"> </span>我<span class="_ _1a"> </span>们<span class="_ _1a"> </span>可<span class="_ _1a"> </span>以<span class="_ _1a"> </span>使<span class="_ _1a"> </span>用<span class="_ _1a"> </span><span class="ff3"> <span class="_ _1b"> </span>ping </span></div><div class="t m0 x6 h8 y10 ff3 fs4 fc0 sc1 ls0 ws0">202.202.240.16 -l 2000  <span class="ff4">命令指定要发送的数据长度。<span class="_ _10"></span>此时使用<span class="ff3">  Wireshark  </span>抓包<span class="_ _1c"></span>（用<span class="ff3">  ip.addr </span></span></div><div class="t m0 x6 h8 y11 ff3 fs4 fc0 sc1 ls0 ws0">== 202.202.240.16  <span class="ff4">进行过滤），了解</span>  IP  <span class="ff4">包如何进行分段，如：分段标志、偏移量以及</span></div><div class="t m0 x6 h8 y12 ff4 fs4 fc0 sc1 ls0 ws0">每个包的大小等</div><div class="t m0 x6 ha y56 ff6 fs5 fc0 sc1 ls0 ws0">第一片<span class="ff3">  </span>包大小为<span class="_ _14"> </span><span class="ff3">1500</span></div><div class="t m0 x9 ha y61 ff6 fs5 fc0 sc1 ls0 ws0">标识符为<span class="_ _14"> </span><span class="ff3">0x3108 Total lenth </span>为<span class="ff3">  1500 fragment offset </span>为<span class="_ _14"> </span><span class="ff3">0</span></div><div class="t m0 x6 ha y6b ff6 fs5 fc0 sc1 ls0 ws0">第二片<span class="ff3">  </span>包大小为<span class="_ _14"> </span><span class="ff3">548</span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf8" class="pf w0 h0" data-page-no="8"><div class="pc pc8 w0 h0"><img class="bi x3 y6c w5 h12" alt="" src="bg8.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 7 -</div></div><div class="t m0 x6 ha y6d ff6 fs5 fc0 sc1 ls0 ws0">标识符为<span class="_ _14"> </span><span class="ff3">0x3108  <span class="_ _15"> </span>Total lenth </span>为<span class="ff3">  548  <span class="_ _15"> </span>fragment offset </span>为<span class="_ _14"> </span><span class="ff3">1480</span></div><div class="t m0 x6 h8 y6e ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div><div class="t m0 x6 h8 y14 ff4 fs4 fc0 sc1 ls0 ws0">分段与重组是一个耗费资源的操作，<span class="_ _1d"></span>特别是当分段由传送路径上的节点即路由器来完成</div><div class="t m0 x6 h8 y6f ff4 fs4 fc0 sc1 ls0 ws0">的时候，所以<span class="ff3">  IPv6  </span>已经不允许分段了。那么<span class="ff3">  IPv6  </span>中，如果路由器遇到了一个大数据</div><div class="t m0 x6 h8 y70 ff4 fs4 fc0 sc1 ls0 ws0">包该怎么办？</div><div class="t m0 x6 h8 y15 ff3 fs4 fc0 sc1 ls0 ws0">Ipv6 <span class="ff4">会丢弃相应超过限制的包</span></div><div class="t m0 x6 h8 y71 ff4 fs4 fc0 sc1 ls0 ws0">实作三<span class="ff3">  </span>考察<span class="ff3">  TTL  </span>事件</div><div class="t m0 x6 h8 y19 ff4 fs4 fc0 sc1 ls0 ws0">在<span class="ff3">  IP <span class="_ _d"> </span></span>包头中<span class="_ _0"></span>有一个<span class="ff3"> <span class="_ _d"> </span>TTL  </span>字段<span class="_ _0"></span>用来限定<span class="_ _0"></span>该包可以<span class="_ _0"></span>在<span class="ff3">  Internet </span>上<span class="_ _0"></span>传输多少<span class="_ _0"></span>跳（<span class="ff3">hops</span>）<span class="_ _0"></span>，</div><div class="t m0 x6 h8 y72 ff4 fs4 fc0 sc1 ls0 ws0">一般该值设置为<span class="ff3">  64</span>、<span class="ff3">128 </span>等。</div><div class="t m0 x6 h8 y1c ff4 fs4 fc0 sc1 ls0 ws0">在验证<span class="_ _0"></span>性实验<span class="_ _0"></span>部分我们<span class="_ _0"></span>使用了<span class="ff3"> <span class="_ _c"> </span>tracert <span class="_ _d"> </span></span>命令进<span class="_ _0"></span>行路由追<span class="_ _0"></span>踪。其原<span class="_ _0"></span>理是主动<span class="_ _0"></span>设置<span class="ff3"> <span class="_ _c"> </span>IP <span class="_ _d"> </span></span>包的<span class="ff3"> </span></div><div class="t m0 x6 h8 y2d ff3 fs4 fc0 sc1 ls0 ws0">TTL  <span class="ff4">值，从</span>  1  <span class="ff4">开始逐渐增加，直至到达最终目的主机。</span></div><div class="t m0 x6 h8 y73 ff4 fs4 fc0 sc1 ls0 ws0">请使用<span class="_ _0"></span><span class="ff3">  tracert www.baidu.com  </span>命令<span class="_ _0"></span>进行追踪<span class="_ _0"></span>，此时使用<span class="_ _0"></span><span class="ff3">  Wireshark  </span>抓包<span class="_ _0"></span>（用<span class="ff3">  icmp  </span>过</div><div class="t m0 x6 h8 y74 ff4 fs4 fc0 sc1 ls0 ws0">滤），分析每个发送包的<span class="ff3">  TTL  </span>是如何进行改变的，从而理解路由追踪原理。</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf9" class="pf w0 h0" data-page-no="9"><div class="pc pc9 w0 h0"><img class="bi x3 y75 w5 h13" alt="" src="bg9.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 8 -</div></div><div class="t m0 x6 h8 y1b ff3 fs4 fc0 sc1 ls0 ws0">ttl <span class="ff4">逐渐变大</span></div><div class="t m0 x6 h8 y1c ff3 fs4 fc0 sc1 ls0 ws0">Tracet <span class="ff4">工作原理</span>  <span class="ff4">每次发送为<span class="_ _c"> </span></span>ttl  <span class="ff4">为<span class="_ _c"> </span></span>n <span class="ff4">的<span class="_ _c"> </span></span>icmp <span class="ff4">包</span>(n <span class="ff4">依次递增</span>)</div><div class="t m0 x6 h8 y4e ff4 fs4 fc0 sc1 ls0 ws0">第一跳（<span class="ff3">RTB</span>）收到源端发出<span class="_ _c"> </span><span class="ff3">icmp </span>文后，判断出报文的目的<span class="_ _c"> </span><span class="ff3">IP </span>地址不是本机<span class="_ _c"> </span><span class="ff3">IP </span>地址，</div><div class="t m0 x6 h8 y4f ff4 fs4 fc0 sc1 ls0 ws0">将<span class="_ _d"> </span><span class="ff3">TTL<span class="_ _1e"> </span></span>值<span class="_ _0"></span>减<span class="_ _1e"> </span><span class="ff3">1<span class="_ _d"> </span></span>后<span class="_ _0"></span>，<span class="_ _1f"></span>判<span class="_ _0"></span>断<span class="_ _0"></span>出<span class="_ _1e"> </span><span class="ff3">TTL<span class="_ _d"> </span></span>值<span class="_ _1f"></span>等<span class="_ _0"></span>于<span class="_ _1e"> </span><span class="ff3">0<span class="_ _0"></span></span>，<span class="_ _0"></span>则<span class="_ _0"></span>丢<span class="_ _0"></span>弃<span class="_ _1f"></span>报<span class="_ _0"></span>文<span class="_ _0"></span>并<span class="_ _1f"></span>向<span class="_ _0"></span>源<span class="_ _0"></span>端<span class="_ _1f"></span>发<span class="_ _0"></span>送<span class="_ _0"></span>一<span class="_ _1f"></span>个<span class="_ _d"> </span><span class="ff3">ICMP<span class="_ _1e"> </span></span>超<span class="_ _0"></span>时</div><div class="t m0 x6 h8 y76 ff4 fs4 fc0 sc1 ls0 ws0">（<span class="ff3">Time Exceeded</span>）<span class="_ _20"></span>报文（该报文中含有第一跳的<span class="_ _c"> </span><span class="ff3">IP </span>地址）<span class="_ _20"></span>，这样源端就得到了<span class="_ _c"> </span><span class="ff3">RTB </span>的</div><div class="t m0 x6 h8 y77 ff4 fs4 fc0 sc1 ls0 ws0">地址<span class="ff3">,<span class="_ _0"></span></span>以此类推这<span class="_ _0"></span>样就源源不<span class="_ _0"></span>断的获取到<span class="_ _0"></span>沿途节点的超<span class="_ _0"></span>时报文<span class="ff3">,</span>就<span class="_ _0"></span>可以获取沿<span class="_ _0"></span>途节点的信</div><div class="t m0 x6 h8 y78 ff4 fs4 fc0 sc1 ls0 ws0">息</div><div class="t m0 x6 h8 y79 ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div><div class="t m0 x6 h8 y34 ff4 fs4 fc0 sc1 ls0 ws0">在<span class="ff3">  IPv4 <span class="_ _c"> </span></span>中<span class="_ _0"></span>，<span class="ff3">TTL  </span>虽然定<span class="_ _0"></span>义为生命期即<span class="_ _0"></span><span class="ff3">  Time To Live</span>，<span class="_ _0"></span>但现实中我们<span class="_ _0"></span>都以跳数<span class="ff3">/<span class="_ _0"></span></span>节点数</div><div class="t m0 x6 h8 y7a ff4 fs4 fc0 sc1 ls0 ws0">进行<span class="_ _0"></span>设置。<span class="_ _0"></span>如果你<span class="_ _0"></span>收到一<span class="_ _0"></span>个包，<span class="_ _0"></span>其<span class="ff3">  TTL <span class="_ _c"> </span></span>的<span class="_ _0"></span>值为<span class="ff3"> <span class="_ _d"> </span>50</span>，<span class="_ _0"></span>那么可<span class="_ _0"></span>以推断<span class="_ _0"></span>这个包<span class="_ _0"></span>从源点<span class="_ _0"></span>到你</div><div class="t m0 x6 h8 y7b ff4 fs4 fc0 sc1 ls0 ws0">之间有多少跳？</div><div class="t m0 x6 h8 y7c ff3 fs4 fc0 sc1 ls0 ws0">50 <span class="ff4">跳</span></div><div class="t m0 x6 h8 y7d ff1 fs4 fc0 sc0 ls0 ws0">第<span class="_ _c"> </span><span class="ff2 sc1">3 </span>题<span class="ff2 sc1">  </span>传输层</div><div class="t m0 x6 h8 y7e ff4 fs4 fc0 sc1 ls0 ws0">【实验过程】（步骤、记录、数据、程序等）</div><div class="t m0 x6 h8 y7f ff4 fs4 fc0 sc1 ls0 ws0">实作一<span class="ff3">  </span>熟悉<span class="ff3">  TCP  </span>和<span class="ff3">  UDP  </span>段结构</div><div class="t m0 x6 h8 y65 ff4 fs4 fc0 sc1 ls0 ws0">用<span class="ff3">  Wireshark  </span>任意抓包（可用<span class="ff3">  tcp  </span>过滤），熟悉<span class="ff3">  TCP  </span>段的结构，如：源端口、目的端</div><div class="t m0 x6 h8 y66 ff4 fs4 fc0 sc1 ls0 ws0">口、序列号、确认号、各种标志位等字段。</div><div class="t m0 x6 h8 y3d ff4 fs4 fc0 sc1 ls0 ws0">用<span class="ff3">  Wireshark  </span>任意抓<span class="_ _0"></span>包（可用<span class="ff3">  udp  </span>过滤），<span class="_ _0"></span>熟悉<span class="ff3">  UDP  </span>段的结构，如<span class="_ _0"></span>：源端口、目的</div><div class="t m0 x6 h8 y80 ff4 fs4 fc0 sc1 ls0 ws0">端口、长度等。</div><div class="t m0 x6 hc y81 ff3 fs4 fc0 sc1 ls0 ws0">TCP:</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pfa" class="pf w0 h0" data-page-no="a"><div class="pc pca w0 h0"><img class="bi x3 y82 w5 h14" alt="" src="bga.png"/><div class="c x4 yc w3 h5"><div class="t m0 x5 h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 9 -</div></div><div class="t m0 x6 hc y83 ff3 fs4 fc0 sc1 ls0 ws0">Transmission Control Protocol, Src Port: 54190, Dst Port: 443, Seq: 1, Ack: 1, Len: 0</div><div class="t m0 x6 hc y84 ff3 fs4 fc0 sc1 ls0 ws0">   <span class="_ _a"> </span><span class="ff2">  Source Port</span>: 54190</div><div class="t m0 x6 hc y85 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span><span class="ff2">Destination Port:</span> 443</div><div class="t m0 x6 hc y86 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[Stream index: 0]</div><div class="t m0 x6 hc y87 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[TCP Segment Len: 0]</div><div class="t m0 x6 hc y88 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>Sequence Number: 1    <span class="_ _b"> </span>(relative sequence number)</div><div class="t m0 x6 hc y89 ff3 fs4 fc0 sc1 ls0 ws0">   <span class="_ _a"> </span><span class="ff2">  Sequence Number (raw):</span> 1521232354</div><div class="t m0 x6 hc y8a ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[Next Sequence Number: 2    <span class="_ _b"> </span>(relative sequence number)]</div><div class="t m0 x6 hc y8b ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>Acknowledgment Number: 1    <span class="_ _b"> </span>(relative ack number)</div><div class="t m0 x6 hc y38 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>Acknowledgment number (raw): 3625832407</div><div class="t m0 x6 hc y8c ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>0101 .... = <span class="ff2">Header Length:</span> 20 bytes (5)</div><div class="t m0 x6 hc y3a ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span><span class="ff2">Flags:</span> 0x011 (FIN, ACK)</div><div class="t m0 x6 hc y8d ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>000. .... .... = Reserved: Not set</div><div class="t m0 x6 hc y8e ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>...0 .... .... = Nonce: Not set</div><div class="t m0 x6 hc y8f ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... 0... .... = Congestion Window Reduced (CWR): Not set</div><div class="t m0 x6 hc y90 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... .0.. .... = ECN-Echo: Not set</div><div class="t m0 x6 hc y91 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... ..0. .... = Urgent: Not set</div><div class="t m0 x6 hc y81 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... ...1 .... = Acknowledgment: Set</div><div class="t m0 x6 hc y92 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... .... 0... = Push: Not set</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pfb" class="pf w0 h0" data-page-no="b"><div class="pc pcb w0 h0"><img class="bi x3 y93 w5 h15" alt="" src="bgb.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 10 -</div></div><div class="t m0 x6 hc y94 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... .... .0.. = Reset: Not set</div><div class="t m0 x6 hc y95 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... .... ..0. = Syn: Not set</div><div class="t m0 x6 hc y96 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>.... .... ...1 = Fin: Set</div><div class="t m0 x6 h8 y10 ff3 fs4 fc0 sc1 ls0 ws0">        <span class="_ _21"> </span>[TCP Flags:  <span class="ffa">·······</span>A<span class="ffa">···</span>F]</div><div class="t m0 x6 hc y97 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span><span class="ff2">Window:</span> 1024</div><div class="t m0 x6 hc y98 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[Calculated window size: 1024]</div><div class="t m0 x6 hc y99 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[Window size scaling factor: -1 (unknown)]</div><div class="t m0 x6 hc y9a ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>Checksum: 0xe1d1 [unverified]</div><div class="t m0 x6 hc y9b ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[Checksum Status: Unverified]</div><div class="t m0 x6 hc y29 ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>Urgent Pointer: 0</div><div class="t m0 x6 hc y9c ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[SEQ/ACK analysis]</div><div class="t m0 x6 hc y9d ff3 fs4 fc0 sc1 ls0 ws0">    <span class="_ _b"> </span>[Timestamps]</div><div class="t m0 x6 hc y9e ff3 fs4 fc0 sc1 ls0 ws0">UDP:</div><div class="t m0 x6 he y63 ff3 fs5 fc0 sc1 ls0 ws0">User Datagram Protocol, Src Port: 59210, Dst Port: 53</div><div class="t m0 x6 he y9f ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span><span class="ff2">Source Port:</span> 59210</div><div class="t m0 x6 he ya0 ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span><span class="ff2">Destination Port:</span> 53</div><div class="t m0 x6 he ya1 ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span><span class="ff2">Length:</span> 50</div><div class="t m0 x6 he ya2 ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span><span class="ff2">Checksum: </span>0x10b8 [unverified]</div><div class="t m0 x6 he ya3 ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span>[Checksum Status: Unverified]</div><div class="t m0 x6 he ya4 ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span>[Stream index: 0]</div><div class="t m0 x6 he ya5 ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span>[Timestamps]</div><div class="t m0 x6 he ya6 ff3 fs5 fc0 sc1 ls0 ws0">    <span class="_ _f"> </span>UDP payload (42 bytes)</div><div class="t m0 x6 he ya7 ff3 fs5 fc0 sc1 ls0 ws0">Domain Name System (query)</div><div class="t m0 x6 h8 y46 ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pfc" class="pf w0 h0" data-page-no="c"><div class="pc pcc w0 h0"><img class="bi x3 ya8 w5 h16" alt="" src="bgc.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 11 -</div></div><div class="t m0 x6 h8 yf ff4 fs4 fc0 sc1 ls0 ws0">由上大家可以看到<span class="ff3">  UDP  </span>的头部比<span class="ff3">  TCP  </span>简单得多，但两者都有源和目的端口号。请问</div><div class="t m0 x6 h8 y10 ff4 fs4 fc0 sc1 ls0 ws0">源和目的端口号用来干什么？</div><div class="t m1 x6 h17 y12 ffb fs6 fc0 sc1 ls0 ws0">源端口<span class="_ _0"></span>号对应源主<span class="_ _0"></span>机的进程所<span class="_ _0"></span>使用端口</div><div class="t m0 xb h18 y12 ffc fs4 fc0 sc1 ls0 ws0">,</div><div class="t m1 xc h17 y12 ffb fs6 fc0 sc1 ls0 ws0">目的端<span class="_ _0"></span>口是目标进<span class="_ _0"></span>程所监听的<span class="_ _0"></span>端口</div><div class="t m0 xd h18 y12 ffc fs4 fc0 sc1 ls0 ws0">,</div><div class="t m1 xe h17 y12 ffb fs6 fc0 sc1 ls0 ws0">目标进<span class="_ _0"></span>程要</div><div class="t m1 x6 h17 y13 ffb fs6 fc0 sc1 ls0 ws0">返回信息给源进程时需要知道对方的</div><div class="t m0 xf h18 y13 ffc fs4 fc0 sc1 ls0 ws0">ip+</div><div class="t m1 x10 h17 y13 ffb fs6 fc0 sc1 ls0 ws0">端口</div><div class="t m0 x6 h8 ya9 ff4 fs4 fc0 sc1 ls0 ws0">实作二<span class="ff3">  </span>分析<span class="ff3">  TCP  </span>建立和释放连接</div><div class="t m0 x6 h8 y15 ff4 fs4 fc0 sc1 ls0 ws0">打开浏览器访问<span class="ff3">  qige.io  </span>网站，用<span class="ff3">  Wireshark  </span>抓包（可用<span class="ff3">  tcp  </span>过滤后再使用加上<span class="ff3">  Follow </span></div><div class="t m0 x6 h8 yaa ff3 fs4 fc0 sc1 ls0 ws0">TCP Stream<span class="ff4">），不要立即停止</span>  Wireshark  <span class="ff4">捕获，待页面显示完毕后再多等一段时间使得</span></div><div class="t m0 x6 h8 yab ff4 fs4 fc0 sc1 ls0 ws0">能够捕获释放连接的包。</div><div class="t m0 x6 h8 y18 ff4 fs4 fc0 sc1 ls0 ws0">请在你捕获的包中找到三次握手建立连接的包，<span class="_ _22"></span>并说明为何它们是用于建立连接的，<span class="_ _22"></span>有</div><div class="t m0 x6 h8 yac ff4 fs4 fc0 sc1 ls0 ws0">什么特征。</div><div class="t m0 x6 ha yad ff6 fs5 fc0 sc1 ls0 ws0">带阴影的三次<span class="_ _14"> </span><span class="ff3">tcp </span>握手</div><div class="t m1 x6 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">第一次握手</div><div class="t m0 x11 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">(SYN=1, seq=x)</div><div class="t m1 x6 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">客户端发送一个</div><div class="t m0 x12 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">  TCP </div><div class="t m1 x13 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">的</div><div class="t m0 x14 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">  SYN </div><div class="t m1 x15 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">标志位置</div><div class="t m0 x16 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">1</div><div class="t m1 x17 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">的包，指明客户端打算连接的服务器的端口，</div><div class="t m1 x6 h17 y7a ffb fs6 fc0 sc1 ls0 ws0">以及初始序号</div><div class="t m0 x18 h18 y7a ffc fs4 fc0 sc1 ls0 ws0">  X,</div><div class="t m1 x19 h17 y7a ffb fs6 fc0 sc1 ls0 ws0">保存在包头的序列号</div><div class="t m0 x1a h18 y7a ffc fs4 fc0 sc1 ls0 ws0">(Sequence Number)</div><div class="t m1 x1b h17 y7a ffb fs6 fc0 sc1 ls0 ws0">字段里。<span class="_ _22"></span>发送完毕后，<span class="_ _20"></span>客户端进</div><div class="t m1 x6 h17 y7b ffb fs6 fc0 sc1 ls0 ws0">入</div><div class="t m0 x1c h18 y7b ffc fs4 fc0 sc1 ls0 ws0">  SYN_SEND </div><div class="t m1 x1d h17 y7b ffb fs6 fc0 sc1 ls0 ws0">状态。</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pfd" class="pf w0 h0" data-page-no="d"><div class="pc pcd w0 h0"><img class="bi x3 yae w6 h19" alt="" src="bgd.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 12 -</div></div><div class="t m1 x6 h17 yf ffb fs6 fc0 sc1 ls0 ws0">第二次握手</div><div class="t m0 x11 h18 yf ffc fs4 fc0 sc1 ls0 ws0">(SYN=1, ACK=1, seq=y, ACKnum=x+1)</div><div class="t m1 x6 h17 y10 ffb fs6 fc0 sc1 ls0 ws0">服务器发回确认包</div><div class="t m0 x1e h18 y10 ffc fs4 fc0 sc1 ls0 ws0">(ACK)</div><div class="t m1 x1f h17 y10 ffb fs6 fc0 sc1 ls0 ws0">应答。即</div><div class="t m0 x20 h18 y10 ffc fs4 fc0 sc1 ls0 ws0">  SYN </div><div class="t m1 xc h17 y10 ffb fs6 fc0 sc1 ls0 ws0">标志位和</div><div class="t m0 x21 h18 y10 ffc fs4 fc0 sc1 ls0 ws0">  ACK </div><div class="t m1 x1b h17 y10 ffb fs6 fc0 sc1 ls0 ws0">标志位均为</div><div class="t m0 x22 h18 y10 ffc fs4 fc0 sc1 ls0 ws0">1</div><div class="t m1 x23 h17 y10 ffb fs6 fc0 sc1 ls0 ws0">。服务器端选择自</div><div class="t m1 x6 h17 yaf ffb fs6 fc0 sc1 ls0 ws0">己</div><div class="t m0 x1c h18 yaf ffc fs4 fc0 sc1 ls0 ws0">  ISN </div><div class="t m1 x24 h17 yaf ffb fs6 fc0 sc1 ls0 ws0">序列<span class="_ _0"></span>号，<span class="_ _0"></span>放到</div><div class="t m0 x25 h18 yaf ffc fs4 fc0 sc1 ls0 ws0">  Seq </div><div class="t m1 x26 h17 yaf ffb fs6 fc0 sc1 ls0 ws0">域里<span class="_ _0"></span>，同<span class="_ _0"></span>时将<span class="_ _0"></span>确认<span class="_ _0"></span>序号</div><div class="t m0 x27 h18 yaf ffc fs4 fc0 sc1 ls0 ws0">(Acknowledgement Number)</div><div class="t m1 x28 h17 yaf ffb fs6 fc0 sc1 ls0 ws0">设置<span class="_ _0"></span>为客</div><div class="t m1 x6 h17 y12 ffb fs6 fc0 sc1 ls0 ws0">户的</div><div class="t m0 x7 h18 y12 ffc fs4 fc0 sc1 ls0 ws0">  ISN </div><div class="t m1 x29 h17 y12 ffb fs6 fc0 sc1 ls0 ws0">加</div><div class="t m0 x2a h18 y12 ffc fs4 fc0 sc1 ls0 ws0">1</div><div class="t m1 x2b h17 y12 ffb fs6 fc0 sc1 ls0 ws0">，即</div><div class="t m0 x2c h18 y12 ffc fs4 fc0 sc1 ls0 ws0">X+1</div><div class="t m1 x2d h17 y12 ffb fs6 fc0 sc1 ls0 ws0">。</div><div class="t m0 x2e h18 y12 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x2f h17 y12 ffb fs6 fc0 sc1 ls0 ws0">发送完毕后，服务器端进入</div><div class="t m0 x30 h18 y12 ffc fs4 fc0 sc1 ls0 ws0">  SYN_RCVD </div><div class="t m1 x31 h17 y12 ffb fs6 fc0 sc1 ls0 ws0">状态。</div><div class="t m1 x6 h17 y53 ffb fs6 fc0 sc1 ls0 ws0">第三次握手</div><div class="t m0 x11 h18 y53 ffc fs4 fc0 sc1 ls0 ws0">(ACK=1</div><div class="t m1 x2c h17 y53 ffb fs6 fc0 sc1 ls0 ws0">，</div><div class="t m0 x32 h18 y53 ffc fs4 fc0 sc1 ls0 ws0">ACKnum=y+1)</div><div class="t m1 x6 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">客户端再次发送确认包</div><div class="t m0 x33 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">(ACK)</div><div class="t m1 x34 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">，</div><div class="t m0 x15 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">SYN </div><div class="t m1 x35 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">标志位为</div><div class="t m0 x36 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">0</div><div class="t m1 x37 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">，</div><div class="t m0 x38 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">ACK </div><div class="t m1 x39 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">标志位为</div><div class="t m0 x3a h18 y33 ffc fs4 fc0 sc1 ls0 ws0">1</div><div class="t m1 x3b h17 y33 ffb fs6 fc0 sc1 ls0 ws0">，并且把服务器发来</div><div class="t m0 x3c h18 y33 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m0 x6 h18 yb0 ffc fs4 fc0 sc1 ls0 ws0">ACK </div><div class="t m1 x1 h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">的序号字段</div><div class="t m0 x3d h18 yb0 ffc fs4 fc0 sc1 ls0 ws0">+1</div><div class="t m1 x3e h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">，放在确定字段中发送给对方，并且在数据段放写</div><div class="t m0 x3f h18 yb0 ffc fs4 fc0 sc1 ls0 ws0">ISN</div><div class="t m1 x40 h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">的</div><div class="t m0 x41 h18 yb0 ffc fs4 fc0 sc1 ls0 ws0">+1</div><div class="t m1 x42 h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">发送完</div><div class="t m1 x6 h17 yb1 ffb fs6 fc0 sc1 ls0 ws0">毕<span class="_ _23"> </span>后<span class="_ _23"> </span>，<span class="_ _23"> </span>客<span class="_ _23"> </span>户<span class="_ _23"> </span>端<span class="_ _23"> </span>进<span class="_ _23"> </span>入</div><div class="t m0 x43 h18 yb1 ffc fs4 fc0 sc1 ls0 ws0"> <span class="_ _3"> </span>ESTABLISHED </div><div class="t m1 x44 h17 yb1 ffb fs6 fc0 sc1 ls0 ws0">状<span class="_ _23"> </span>态<span class="_ _23"> </span>，<span class="_ _23"> </span>当<span class="_ _23"> </span>服<span class="_ _23"> </span>务<span class="_ _23"> </span>器<span class="_ _23"></span>端<span class="_ _23"></span>接<span class="_ _23"></span>收<span class="_ _23"></span>到<span class="_ _23"></span>这<span class="_ _23"></span>个<span class="_ _23"></span>包<span class="_ _23"></span>时<span class="_ _23"></span>，<span class="_ _23"></span>也<span class="_ _23"></span>进<span class="_ _23"></span>入</div><div class="t m0 x45 h18 yb1 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m0 x6 h18 yb2 ffc fs4 fc0 sc1 ls0 ws0">ESTABLISHED </div><div class="t m1 x46 h17 yb2 ffb fs6 fc0 sc1 ls0 ws0">状态，</div><div class="t m0 x13 h18 yb2 ffc fs4 fc0 sc1 ls0 ws0">TCP </div><div class="t m1 x26 h17 yb2 ffb fs6 fc0 sc1 ls0 ws0">握手结束。</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pfe" class="pf w0 h0" data-page-no="e"><div class="pc pce w0 h0"><img class="bi x3 yb3 w5 h1a" alt="" src="bge.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 13 -</div></div><div class="t m0 x6 h8 y73 ff4 fs4 fc0 sc1 ls0 ws0">请在你捕获的包中找到四次挥手释放连接的包，<span class="_ _22"></span>并说明为何它们是用于释放连接的，<span class="_ _22"></span>有</div><div class="t m0 x6 h8 y74 ff4 fs4 fc0 sc1 ls0 ws0">什么特征。</div><div class="t m1 x6 h17 yb4 ffb fs6 fc0 sc1 ls0 ws0">特征</div><div class="t m0 x7 h18 yb4 ffc fs4 fc0 sc1 ls0 ws0">:</div><div class="t m1 x1 h1b yb4 ffd fs6 fc1 sc1 ls0 ws0">客<span class="ffe">户</span>端收到</div><div class="t m0 x19 h1c yb4 fff fs4 fc1 sc1 ls0 ws0"> <span class="_ _14"> </span>FIN </div><div class="t m1 x33 h1b yb4 ffd fs6 fc1 sc1 ls0 ws0">之后，<span class="ffe">发</span>送一个</div><div class="t m0 x47 h1c yb4 fff fs4 fc1 sc1 ls0 ws0"> <span class="_ _14"> </span>ACK </div><div class="t m1 x48 h1b yb4 ffe fs6 fc1 sc1 ls0 ws0">报<span class="ffd">文作</span>为应<span class="ffd">答</span></div><div class="t m1 x6 h17 y44 ffb fs6 fc0 sc1 ls0 ws0">（</div><div class="t m0 x1c h18 y44 ffc fs4 fc0 sc1 ls0 ws0">1</div><div class="t m1 x2 h17 y44 ffb fs6 fc0 sc1 ls0 ws0">）<span class="_ _20"></span>某端首先调用</div><div class="t m0 x3e h18 y44 ffc fs4 fc0 sc1 ls0 ws0">close</div><div class="t m1 x1f h17 y44 ffb fs6 fc0 sc1 ls0 ws0">，成为主动关闭端，向另一端发送</div><div class="t m0 x49 h18 y44 ffc fs4 fc0 sc1 ls0 ws0">FIN</div><div class="t m1 x4a h17 y44 ffb fs6 fc0 sc1 ls0 ws0">分节，表示数据发送完</div><div class="t m1 x6 h17 y45 ffb fs6 fc0 sc1 ls0 ws0">毕，此时主动关闭端状态</div><div class="t m0 x2e h18 y45 ffc fs4 fc0 sc1 ls0 ws0">FIN_WAIT_1</div><div class="t m1 x4b h17 y45 ffb fs6 fc0 sc1 ls0 ws0">；</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pff" class="pf w0 h0" data-page-no="f"><div class="pc pcf w0 h0"><img class="bi x3 yb5 w5 h1d" alt="" src="bgf.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 14 -</div></div><div class="t m1 x6 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">（</div><div class="t m0 x1c h18 y1a ffc fs4 fc0 sc1 ls0 ws0">2</div><div class="t m1 x2 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">）<span class="_ _1d"></span>接收到</div><div class="t m0 x4c h18 y1a ffc fs4 fc0 sc1 ls0 ws0">FIN</div><div class="t m1 x19 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">的是被动关闭端，</div><div class="t m0 x4d h18 y1a ffc fs4 fc0 sc1 ls0 ws0">FIN</div><div class="t m1 x4e h17 y1a ffb fs6 fc0 sc1 ls0 ws0">由</div><div class="t m0 x17 h18 y1a ffc fs4 fc0 sc1 ls0 ws0">TCP</div><div class="t m1 x37 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">确认，先向主动关闭端发送</div><div class="t m0 x4f h18 y1a ffc fs4 fc0 sc1 ls0 ws0">ACK</div><div class="t m1 x50 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">，作为</div><div class="t m1 x6 h17 y4c ffb fs6 fc0 sc1 ls0 ws0">一个文件结束符传递给接收端应用进程<span class="_ _1d"></span>（放在已排队等候该应用进程接收到的任何其他</div><div class="t m1 x6 h17 y4d ffb fs6 fc0 sc1 ls0 ws0">数据之后）<span class="_ _10"></span>，<span class="_ _17"></span>因为</div><div class="t m0 x1e h18 y4d ffc fs4 fc0 sc1 ls0 ws0">FIN</div><div class="t m1 x13 h17 y4d ffb fs6 fc0 sc1 ls0 ws0">的接收意味着接收端应用进程在相应连接无额外数据可接收，<span class="_ _17"></span>接</div><div class="t m1 x6 h17 yb6 ffb fs6 fc0 sc1 ls0 ws0">收端状态</div><div class="t m0 x51 h18 yb6 ffc fs4 fc0 sc1 ls0 ws0">CLOSE_WAIT</div><div class="t m1 x52 h17 yb6 ffb fs6 fc0 sc1 ls0 ws0">；主动关闭端接收到</div><div class="t m0 x53 h18 yb6 ffc fs4 fc0 sc1 ls0 ws0">ACK</div><div class="t m1 x38 h17 yb6 ffb fs6 fc0 sc1 ls0 ws0">状态变为</div><div class="t m0 x54 h18 yb6 ffc fs4 fc0 sc1 ls0 ws0">FIN_WAIT_2</div><div class="t m1 x55 h17 yb6 ffb fs6 fc0 sc1 ls0 ws0">；</div><div class="t m1 x6 h17 y7e ffb fs6 fc0 sc1 ls0 ws0">（</div><div class="t m0 x1c h18 y7e ffc fs4 fc0 sc1 ls0 ws0">3</div><div class="t m1 x2 h17 y7e ffb fs6 fc0 sc1 ls0 ws0">）<span class="_ _10"></span>一段时间后，<span class="_ _16"></span>接收端接收到这个文件结束符的应用进程调用</div><div class="t m0 x56 h18 y7e ffc fs4 fc0 sc1 ls0 ws0">close</div><div class="t m1 x3f h17 y7e ffb fs6 fc0 sc1 ls0 ws0">关闭套接字，向</div><div class="t m1 x6 h17 yb7 ffb fs6 fc0 sc1 ls0 ws0">主动关闭端发送</div><div class="t m0 x57 h18 yb7 ffc fs4 fc0 sc1 ls0 ws0">FIN</div><div class="t m1 x58 h17 yb7 ffb fs6 fc0 sc1 ls0 ws0">，接收端状态为</div><div class="t m0 x59 h18 yb7 ffc fs4 fc0 sc1 ls0 ws0">LAST_ACK</div><div class="t m1 x5a h17 yb7 ffb fs6 fc0 sc1 ls0 ws0">；</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf10" class="pf w0 h0" data-page-no="10"><div class="pc pc10 w0 h0"><img class="bi x3 yb8 w6 h1e" alt="" src="bg10.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 15 -</div></div><div class="t m1 x6 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">（</div><div class="t m0 x1c h18 y1a ffc fs4 fc0 sc1 ls0 ws0">4</div><div class="t m1 x2 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">）<span class="_ _1d"></span>主动关闭端确认</div><div class="t m0 x25 h18 y1a ffc fs4 fc0 sc1 ls0 ws0">FIN</div><div class="t m1 x5b h17 y1a ffb fs6 fc0 sc1 ls0 ws0">，状态变为</div><div class="t m0 x1a h18 y1a ffc fs4 fc0 sc1 ls0 ws0">TIME_WAIT</div><div class="t m1 x38 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">，并向接收端发送</div><div class="t m0 x5c h18 y1a ffc fs4 fc0 sc1 ls0 ws0">ACK</div><div class="t m1 x5d h17 y1a ffb fs6 fc0 sc1 ls0 ws0">，接收端接收</div><div class="t m1 x6 h17 y4c ffb fs6 fc0 sc1 ls0 ws0">到</div><div class="t m0 x5e h18 y4c ffc fs4 fc0 sc1 ls0 ws0">ACK</div><div class="t m1 x5f h17 y4c ffb fs6 fc0 sc1 ls0 ws0">关闭</div><div class="t m0 x2a h18 y4c ffc fs4 fc0 sc1 ls0 ws0">TCP</div><div class="t m1 x60 h17 y4c ffb fs6 fc0 sc1 ls0 ws0">，而主动关闭端一段时间后也关闭</div><div class="t m0 x61 h18 y4c ffc fs4 fc0 sc1 ls0 ws0">TCP</div><div class="t m1 x62 h17 y4c ffb fs6 fc0 sc1 ls0 ws0">；</div><div class="t m0 x6 h8 yb9 ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题一</span></span></div><div class="t m0 x6 h8 y3d ff4 fs4 fc0 sc1 ls0 ws0">去掉<span class="ff3">  Follow TCP Stream</span>，即不跟踪一个<span class="ff3">  TCP  </span>流，你可能会看到访问<span class="ff3">  qige.io  </span>时我们建</div><div class="t m0 x6 h8 y80 ff4 fs4 fc0 sc1 ls0 ws0">立的连接有多个。请思考为什么会有多个连接？作用是什么？</div><div class="t m1 x6 h17 y67 ff10 fs6 fc0 sc0 ls0 ws0">可能为了优<span class="_ _0"></span>化速度</div><div class="t m0 x1e h1f y67 ff11 fs4 fc0 sc1 ls0 ws0">,</div><div class="t m1 x63 h17 y67 ff10 fs6 fc0 sc0 ls0 ws0">开启多进程</div><div class="t m0 x64 h1f y67 ff11 fs4 fc0 sc1 ls0 ws0">/</div><div class="t m1 x15 h17 y67 ff10 fs6 fc0 sc0 ls0 ws0">线程访问对<span class="_ _0"></span>应网站</div><div class="t m0 x38 h1f y67 ff11 fs4 fc0 sc1 ls0 ws0">,</div><div class="t m1 x65 h17 y67 ff10 fs6 fc0 sc0 ls0 ws0">类似于数据<span class="_ _0"></span>库的连接池</div><div class="t m1 x6 h17 y68 ff10 fs6 fc0 sc0 ls0 ws0">其次网页还<span class="_ _0"></span>有其他资源的引用</div><div class="t m0 x66 h1f y68 ff11 fs4 fc0 sc1 ls0 ws0">,</div><div class="t m1 x64 h17 y68 ff10 fs6 fc0 sc0 ls0 ws0">要去其他位<span class="_ _0"></span>置获取资源</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf11" class="pf w0 h0" data-page-no="11"><div class="pc pc11 w0 h0"><img class="bi x3 yba w5 h20" alt="" src="bg11.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 16 -</div></div><div class="t m0 x6 h8 ybb ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题二</span></span></div><div class="t m0 x6 h8 y11 ff4 fs4 fc0 sc1 ls0 ws0">我们上面提到了释放连接需要四次挥手，<span class="_ _24"></span>有时你可能会抓到只有三次挥手。<span class="_ _24"></span>原因是什么？</div><div class="t m1 x6 h17 y13 ff10 fs6 fc0 sc0 ls0 ws0">可能是三<span class="_ _0"></span>次握手是因<span class="_ _0"></span>为在释放连接<span class="_ _0"></span>的时候，返回<span class="_ _0"></span>的时候</div><div class="t m0 x67 h1f y13 ff11 fs4 fc0 sc1 ls0 ws0">ACK=1</div><div class="t m1 x4a h17 y13 ff10 fs6 fc0 sc0 ls0 ws0">确认释放<span class="_ _0"></span>连接的时候<span class="_ _0"></span>顺</div><div class="t m1 x6 h17 y14 ff10 fs6 fc0 sc0 ls0 ws0">便在同一个<span class="_ _0"></span>报文中置</div><div class="t m0 x68 h1f y14 ff11 fs4 fc0 sc1 ls0 ws0">FIN=1</div><div class="t m1 x26 h17 y14 ff10 fs6 fc0 sc0 ls0 ws0">，即同时发<span class="_ _0"></span>出的释放连接的请求。</div><div class="t m0 x6 h8 y15 ff1 fs4 fc0 sc0 ls0 ws0">第<span class="_ _c"> </span><span class="ff2 sc1">4 </span>题<span class="ff2 sc1">  </span>应用层</div><div class="t m0 x6 h8 y17 ff4 fs4 fc0 sc1 ls0 ws0">【实验过程】（步骤、记录、数据、程序等）</div><div class="t m0 x6 h8 y71 ff4 fs4 fc0 sc1 ls0 ws0">实作一<span class="ff3">  </span>了解<span class="ff3">  DNS  </span>解析</div><div class="t m0 x6 h8 y18 ff4 fs4 fc0 sc1 ls0 ws0">先使用<span class="ff3">  ipconfig /flushdns  </span>命令清除缓存，再使用<span class="ff3">  nslookup qige.io  </span>命令进行解析，同时</div><div class="t m0 x6 h8 yac ff4 fs4 fc0 sc1 ls0 ws0">用<span class="ff3">  Wireshark  </span>任意抓包（可用<span class="ff3">  dns  </span>过滤）。</div><div class="t m0 x6 h8 ybc ff4 fs4 fc0 sc1 ls0 ws0">你应该<span class="_ _0"></span>可以看到当<span class="_ _0"></span>前计算机<span class="_ _0"></span>使用<span class="ff3">  UDP</span>，<span class="_ _0"></span>向默认的<span class="ff3"> <span class="_ _d"> </span>DNS  </span>服务<span class="_ _0"></span>器的<span class="ff3">  53  </span>号<span class="_ _0"></span>端口发出了<span class="_ _0"></span>查</div><div class="t m0 x6 h8 ybd ff4 fs4 fc0 sc1 ls0 ws0">询请求，而<span class="ff3">  DNS  </span>服务器的<span class="ff3">  53  </span>号端口返回了结果。</div><div class="t m0 x6 h8 y68 ff4 fs4 fc0 sc1 ls0 ws0">可了解一下<span class="ff3">  DNS  </span>查询和应答的相关字段的含义</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf12" class="pf w0 h0" data-page-no="12"><div class="pc pc12 w0 h0"><img class="bi x3 ybe w5 h21" alt="" src="bg12.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 17 -</div></div><div class="t m0 x6 h8 ybf ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div><div class="t m0 x6 h8 y50 ff4 fs4 fc0 sc1 ls0 ws0">你可能会发现对同一个站点，我们发出的<span class="ff3">  DNS  </span>解析请求不止一个，思考一下是什么原</div><div class="t m0 x6 h8 yc0 ff4 fs4 fc0 sc1 ls0 ws0">因？</div><div class="t m1 x6 h17 y52 ff10 fs6 fc0 sc0 ls0 ws0">其一可能为<span class="_ _0"></span>了的负载均衡</div><div class="t m0 x69 h1f y52 ff11 fs4 fc0 sc1 ls0 ws0">,</div><div class="t m1 x2e h17 y52 ff10 fs6 fc0 sc0 ls0 ws0">即服务器和</div><div class="t m0 x44 h1f y52 ff11 fs4 fc0 sc1 ls0 ws0">dns</div><div class="t m1 x5 h17 y52 ff10 fs6 fc0 sc0 ls0 ws0">服务器的负<span class="_ _0"></span>载均衡</div><div class="t m1 x6 h17 y53 ff10 fs6 fc0 sc0 ls0 ws0">其二可能是<span class="_ _0"></span>迭代查询的原因</div><div class="t m1 x6 h17 y34 ff10 fs6 fc0 sc0 ls0 ws0">迭代查询的<span class="_ _0"></span>特点<span class="_ _1d"></span>：<span class="_ _25"></span>当根域名服务<span class="_ _0"></span>器收到本地域名服务<span class="_ _0"></span>器发出的迭代查询请求<span class="_ _0"></span>报文时，要</div><div class="t m1 x6 h17 y7a ff10 fs6 fc0 sc0 ls0 ws0">么给出<span class="_ _0"></span>所要查询<span class="_ _0"></span>的</div><div class="t m0 x63 h1f y7a ff11 fs4 fc0 sc1 ls0 ws0">IP</div><div class="t m1 x25 h17 y7a ff10 fs6 fc0 sc0 ls0 ws0">地址，<span class="_ _0"></span>要么告诉<span class="_ _0"></span>本地服务器<span class="_ _0"></span>：<span class="ff12">“</span>你下一<span class="_ _0"></span>步应当向<span class="_ _0"></span>哪一个域名<span class="_ _0"></span>服务</div><div class="t m1 x6 h17 y7b ff10 fs6 fc0 sc0 ls0 ws0">器进行查询<span class="_ _0"></span>”。</div><div class="t m1 x6 h17 yc1 ff10 fs6 fc0 sc0 ls0 ws0">然后让本地<span class="_ _0"></span>服务器进行后续的查询<span class="_ _0"></span>。<span class="_ _26"></span>根域名服务器<span class="_ _0"></span>通常是把自己知道的<span class="_ _0"></span>顶级域名服务器</div><div class="t m1 x6 h17 yc2 ff10 fs6 fc0 sc0 ls0 ws0">的</div><div class="t m0 x5e h1f yc2 ff11 fs4 fc0 sc1 ls0 ws0">IP</div><div class="t m1 x6a h17 yc2 ff10 fs6 fc0 sc0 ls0 ws0">地址告诉本<span class="_ _0"></span>地域名服务器，让本地<span class="_ _0"></span>域名服务器再向顶级<span class="_ _0"></span>域名服务器查询。</div><div class="t m0 x6 h1f y7e ff11 fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x6b h17 y7e ff10 fs6 fc0 sc0 ls0 ws0">顶级域名服<span class="_ _0"></span>务器在收到本地域名服<span class="_ _0"></span>务器的查询请求后，<span class="_ _0"></span>要么给出所要查询的</div><div class="t m0 x6c h1f y7e ff11 fs4 fc0 sc1 ls0 ws0">IP</div><div class="t m1 x6d h17 y7e ff10 fs6 fc0 sc0 ls0 ws0">地址，</div><div class="t m1 x6 h17 yb7 ff10 fs6 fc0 sc0 ls0 ws0">要么告诉本<span class="_ _0"></span>地服务器下一步应当向<span class="_ _0"></span>哪一个权限域名服务<span class="_ _0"></span>器进行查询。</div><div class="t m0 x6 h1f y3c ff11 fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x6b h17 y3c ff10 fs6 fc0 sc0 ls0 ws0">最后，知道<span class="_ _0"></span>了所要解析的</div><div class="t m0 x2f h1f y3c ff11 fs4 fc0 sc1 ls0 ws0">IP</div><div class="t m1 x66 h17 y3c ff10 fs6 fc0 sc0 ls0 ws0">地址或报错<span class="_ _0"></span>，然后把这个结果返回<span class="_ _0"></span>给发起查询的主机</div><div class="t m0 x6 h8 y43 ff4 fs4 fc0 sc1 ls0 ws0">实作二<span class="ff3">  </span>了解<span class="ff3">  HTTP  </span>的请求和应答</div><div class="t m0 x6 h8 y44 ff4 fs4 fc0 sc1 ls0 ws0">打开浏览<span class="_ _0"></span>器访问<span class="ff3">  qige.io  </span>网站，<span class="_ _0"></span>用<span class="ff3">  Wireshark  </span>抓包（可<span class="_ _0"></span>用<span class="_ _c"> </span><span class="ff3">http  </span>过滤再加上<span class="ff3"> <span class="_ _c"> </span>Follow <span class="_ _0"></span>TCP </span></div><div class="t m0 x6 h8 y45 ff3 fs4 fc0 sc1 ls0 ws0">Stream<span class="ff4">），不要立即停止</span>  Wireshark  <span class="ff4">捕获，待页面显示完毕后再多等一段时间以将释放</span></div><div class="t m0 x6 h8 yc3 ff4 fs4 fc0 sc1 ls0 ws0">连接的包捕获。</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf13" class="pf w0 h0" data-page-no="13"><div class="pc pc13 w0 h0"><img class="bi x3 yc4 w2 h22" alt="" src="bg13.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 18 -</div></div><div class="t m0 x6 h8 y6a ff4 fs4 fc0 sc1 ls0 ws0">请在你捕获的包中找到<span class="ff3">  HTTP  </span>请求包，查看请求使用的什么命令，如：<span class="ff3">GET, POST</span>。</div><div class="t m0 x6 h8 y13 ff4 fs4 fc0 sc1 ls0 ws0">并仔细了解请求的头部有哪些字段及其意义。</div><div class="t m0 x6 h8 y1c ff4 fs4 fc0 sc1 ls0 ws0">请在你捕获的包中找到<span class="ff3">  HTTP  </span>应答包，查看应答的代码是什么，如：<span class="ff3">200, 304, 404  </span>等。</div><div class="t m0 x6 h8 y2d ff4 fs4 fc0 sc1 ls0 ws0">并仔细了解应答的头部有哪些字段及其意义</div><div class="t m0 x6 h18 y73 ffc fs4 fc0 sc1 ls0 ws0">Accept</div><div class="t m1 x6e h17 y73 ffb fs6 fc0 sc1 ls0 ws0">：告诉</div><div class="t m0 x18 h18 y73 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x63 h17 y73 ffb fs6 fc0 sc1 ls0 ws0">服务器自己接受什么介质类型，</div><div class="t m0 x27 h18 y73 ffc fs4 fc0 sc1 ls0 ws0">/ </div><div class="t m1 x6f h17 y73 ffb fs6 fc0 sc1 ls0 ws0">表示任何类型，</div><div class="t m0 x23 h18 y73 ffc fs4 fc0 sc1 ls0 ws0">type/* </div><div class="t m1 x70 h17 y73 ffb fs6 fc0 sc1 ls0 ws0">表示该类型</div><div class="t m1 x6 h17 y74 ffb fs6 fc0 sc1 ls0 ws0">下的所有子类型，</div><div class="t m0 x1e h18 y74 ffc fs4 fc0 sc1 ls0 ws0">type/sub-type</div><div class="t m1 x64 h17 y74 ffb fs6 fc0 sc1 ls0 ws0">。</div><div class="t m0 x6 h18 y51 ffc fs4 fc0 sc1 ls0 ws0">Accept-Charset</div><div class="t m1 x2b h17 y51 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x57 h18 y51 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x71 h17 y51 ffb fs6 fc0 sc1 ls0 ws0">浏览器申明自己接收的字符集</div><div class="t m0 x6 h18 y52 ffc fs4 fc0 sc1 ls0 ws0">Accept-Encoding</div><div class="t m1 x46 h17 y52 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x72 h18 y52 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x2c h17 y52 ffb fs6 fc0 sc1 ls0 ws0">浏览<span class="_ _0"></span>器申明<span class="_ _0"></span>自己接<span class="_ _0"></span>收的<span class="_ _0"></span>编码方<span class="_ _0"></span>法，通<span class="_ _0"></span>常指定<span class="_ _0"></span>压缩方<span class="_ _0"></span>法，是<span class="_ _0"></span>否支<span class="_ _0"></span>持压</div><div class="t m1 x6 h17 yc5 ffb fs6 fc0 sc1 ls0 ws0">缩，支持什么压缩方法</div><div class="t m0 x33 h18 yc5 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x73 h17 yc5 ffb fs6 fc0 sc1 ls0 ws0">（</div><div class="t m0 x0 h18 yc5 ffc fs4 fc0 sc1 ls0 ws0">gzip</div><div class="t m1 x74 h17 yc5 ffb fs6 fc0 sc1 ls0 ws0">，</div><div class="t m0 x75 h18 yc5 ffc fs4 fc0 sc1 ls0 ws0">deflate</div><div class="t m1 x47 h17 yc5 ffb fs6 fc0 sc1 ls0 ws0">）</div><div class="t m0 x6 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">Accept-Language</div><div class="t m1 x12 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">：：<span class="_ _22"></span>浏览器申明自己接收的语言语言跟字符集的区别<span class="_ _11"></span>：<span class="_ _22"></span>中文是语言，中</div><div class="t m1 x6 h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">文有多种字符集，比如</div><div class="t m0 x2d h18 yb0 ffc fs4 fc0 sc1 ls0 ws0">big5</div><div class="t m1 x76 h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">，</div><div class="t m0 x66 h18 yb0 ffc fs4 fc0 sc1 ls0 ws0">gb2312</div><div class="t m1 x59 h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">，</div><div class="t m0 x77 h18 yb0 ffc fs4 fc0 sc1 ls0 ws0">gbk</div><div class="t m1 x78 h17 yb0 ffb fs6 fc0 sc1 ls0 ws0">等等。</div><div class="t m0 x6 h18 y35 ffc fs4 fc0 sc1 ls0 ws0">Accept-Ranges</div><div class="t m1 x18 h17 y35 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x12 h18 y35 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x68 h17 y35 ffb fs6 fc0 sc1 ls0 ws0">服务<span class="_ _0"></span>器表<span class="_ _0"></span>明自<span class="_ _0"></span>己是否<span class="_ _0"></span>接受<span class="_ _0"></span>获取<span class="_ _0"></span>其某<span class="_ _0"></span>个实体<span class="_ _0"></span>的一<span class="_ _0"></span>部分<span class="_ _0"></span>（比<span class="_ _0"></span>如文件<span class="_ _0"></span>的</div><div class="t m1 x6 h17 y36 ffb fs6 fc0 sc1 ls0 ws0">一部分）的请求。</div><div class="t m0 x1e h18 y36 ffc fs4 fc0 sc1 ls0 ws0">bytes</div><div class="t m1 x33 h17 y36 ffb fs6 fc0 sc1 ls0 ws0">：表示接受，</div><div class="t m0 x59 h18 y36 ffc fs4 fc0 sc1 ls0 ws0">none</div><div class="t m1 xa h17 y36 ffb fs6 fc0 sc1 ls0 ws0">：表示不接受。</div><div class="t m0 x6 h18 y7d ffc fs4 fc0 sc1 ls0 ws0">Age</div><div class="t m1 x79 h17 y7d ffb fs6 fc0 sc1 ls0 ws0">：当代<span class="_ _0"></span>理服务器用自<span class="_ _0"></span>己缓存的实体<span class="_ _0"></span>去响应请求<span class="_ _0"></span>时，用该头部<span class="_ _0"></span>表明该实体<span class="_ _0"></span>从产生到现</div><div class="t m1 x6 h17 yc6 ffb fs6 fc0 sc1 ls0 ws0">在经过多长时间了。</div><div class="t m0 x6 h18 y7f ffc fs4 fc0 sc1 ls0 ws0">Authorization</div><div class="t m1 x4c h17 y7f ffb fs6 fc0 sc1 ls0 ws0">：当客户端接收到来自</div><div class="t m0 x7a h18 y7f ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 xa h17 y7f ffb fs6 fc0 sc1 ls0 ws0">服务器的</div><div class="t m0 x7b h18 y7f ffc fs4 fc0 sc1 ls0 ws0">  WWW-Authenticate </div><div class="t m1 x3f h17 y7f ffb fs6 fc0 sc1 ls0 ws0">响应时，该头部</div><div class="t m1 x6 h17 yc7 ffb fs6 fc0 sc1 ls0 ws0">来回应自己的身份验证信息给</div><div class="t m0 x74 h18 yc7 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x7c h17 yc7 ffb fs6 fc0 sc1 ls0 ws0">服务器。</div><div class="t m0 x6 h18 y3d ffc fs4 fc0 sc1 ls0 ws0">Cache-Control</div><div class="t m1 x18 h17 y3d ffb fs6 fc0 sc1 ls0 ws0">：请求：</div><div class="t m0 x33 h18 y3d ffc fs4 fc0 sc1 ls0 ws0">no-cache</div><div class="t m1 x7d h17 y3d ffb fs6 fc0 sc1 ls0 ws0">（不要缓存的实体，要求现在从</div><div class="t m0 x7e h18 y3d ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x7f h17 y3d ffb fs6 fc0 sc1 ls0 ws0">服务器去取）</div><div class="t m0 x6 h18 y43 ffc fs4 fc0 sc1 ls0 ws0">max-age</div><div class="t m1 x5f h17 y43 ffb fs6 fc0 sc1 ls0 ws0">：（只接受</div><div class="t m0 x2c h18 y43 ffc fs4 fc0 sc1 ls0 ws0">  Age </div><div class="t m1 x69 h17 y43 ffb fs6 fc0 sc1 ls0 ws0">值小于</div><div class="t m0 x80 h18 y43 ffc fs4 fc0 sc1 ls0 ws0">  max-age </div><div class="t m1 x81 h17 y43 ffb fs6 fc0 sc1 ls0 ws0">值，并且没有过期的对象）</div><div class="t m0 x6 h18 y44 ffc fs4 fc0 sc1 ls0 ws0">max-stale</div><div class="t m1 x82 h17 y44 ffb fs6 fc0 sc1 ls0 ws0">：（可以接受过去的对象，但是过期时间必须小于</div><div class="t m0 x6 h18 y67 ffc fs4 fc0 sc1 ls0 ws0">max-stale </div><div class="t m1 x83 h17 y67 ffb fs6 fc0 sc1 ls0 ws0">值）</div><div class="t m0 x6 h18 y68 ffc fs4 fc0 sc1 ls0 ws0">min-fresh</div><div class="t m1 x82 h17 y68 ffb fs6 fc0 sc1 ls0 ws0">：（接受其新鲜生命期大于其当前</div><div class="t m0 x84 h18 y68 ffc fs4 fc0 sc1 ls0 ws0">  Age </div><div class="t m1 x21 h17 y68 ffb fs6 fc0 sc1 ls0 ws0">跟</div><div class="t m0 x85 h18 y68 ffc fs4 fc0 sc1 ls0 ws0">  min-fresh </div><div class="t m1 x86 h17 y68 ffb fs6 fc0 sc1 ls0 ws0">值之和的</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf14" class="pf w0 h0" data-page-no="14"><div class="pc pc14 w0 h0"><img class="bi x3 yc8 w7 h23" alt="" src="bg14.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 19 -</div></div><div class="t m1 x6 h17 y6a ffb fs6 fc0 sc1 ls0 ws0">缓存对象）</div><div class="t m1 x6 h17 y26 ffb fs6 fc0 sc1 ls0 ws0">响应：</div><div class="t m0 x87 h18 y26 ffc fs4 fc0 sc1 ls0 ws0">public(</div><div class="t m1 x2a h17 y26 ffb fs6 fc0 sc1 ls0 ws0">可以用</div><div class="t m0 x58 h18 y26 ffc fs4 fc0 sc1 ls0 ws0">  Cached </div><div class="t m1 x88 h17 y26 ffb fs6 fc0 sc1 ls0 ws0">内容回应任何用户</div><div class="t m0 x89 h18 y26 ffc fs4 fc0 sc1 ls0 ws0">)</div><div class="t m0 x6 h18 yf ffc fs4 fc0 sc1 ls0 ws0">private</div><div class="t m1 x8a h17 yf ffb fs6 fc0 sc1 ls0 ws0">（只能用缓存内容回应先前请求该内容的那个用户）</div><div class="t m0 x6 h18 y10 ffc fs4 fc0 sc1 ls0 ws0">no-cache</div><div class="t m1 x8b h17 y10 ffb fs6 fc0 sc1 ls0 ws0">（可以缓存，但是只有在跟</div><div class="t m0 x35 h18 y10 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x5 h17 y10 ffb fs6 fc0 sc1 ls0 ws0">服务器验证了其有效后，才能返回给客户端）</div><div class="t m0 x6 h18 y11 ffc fs4 fc0 sc1 ls0 ws0">max-age</div><div class="t m1 x5f h17 y11 ffb fs6 fc0 sc1 ls0 ws0">：（本响应包含的对象的过期时间）</div><div class="t m0 x6 h18 y12 ffc fs4 fc0 sc1 ls0 ws0">ALL: no-store</div><div class="t m1 x8c h17 y12 ffb fs6 fc0 sc1 ls0 ws0">（不允许缓存）</div><div class="t m0 x6 h18 y14 ffc fs4 fc0 sc1 ls0 ws0">Connection</div><div class="t m1 x8d h17 y14 ffb fs6 fc0 sc1 ls0 ws0">：请求：</div><div class="t m0 x3e h18 y14 ffc fs4 fc0 sc1 ls0 ws0">close</div><div class="t m1 x1f h17 y14 ffb fs6 fc0 sc1 ls0 ws0">（告诉</div><div class="t m0 x80 h18 y14 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 xf h17 y14 ffb fs6 fc0 sc1 ls0 ws0">服务器或者代理服务器，在完成本次请求的响应</div><div class="t m1 x6 h17 y28 ffb fs6 fc0 sc1 ls0 ws0">后，断开连接，不要等待本次连接的后续请求了）。</div><div class="t m0 x6 h18 ya9 ffc fs4 fc0 sc1 ls0 ws0">keepalive</div><div class="t m1 x8e h17 ya9 ffb fs6 fc0 sc1 ls0 ws0">（告诉</div><div class="t m0 x12 h18 ya9 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x68 h17 ya9 ffb fs6 fc0 sc1 ls0 ws0">服务器或者代理服务器，在完成本次请求的</div><div class="t m1 x6 h17 y15 ffb fs6 fc0 sc1 ls0 ws0">响应后，保持连接，等待本次连接的后续请求）。</div><div class="t m1 x6 h17 y16 ffb fs6 fc0 sc1 ls0 ws0">响应：</div><div class="t m0 x87 h18 y16 ffc fs4 fc0 sc1 ls0 ws0">close</div><div class="t m1 x11 h17 y16 ffb fs6 fc0 sc1 ls0 ws0">（连接已经关闭）。</div><div class="t m0 x6 h18 y17 ffc fs4 fc0 sc1 ls0 ws0">keepalive</div><div class="t m1 x8e h17 y17 ffb fs6 fc0 sc1 ls0 ws0">（连接保持着，在等待本次连接的后续请求）。</div><div class="t m0 x6 h18 y71 ffc fs4 fc0 sc1 ls0 ws0">Keep-Alive</div><div class="t m1 x83 h17 y71 ffb fs6 fc0 sc1 ls0 ws0">：如果浏览器请求保持连接，则该头部表明希望</div><div class="t m0 x8f h18 y71 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x56 h17 y71 ffb fs6 fc0 sc1 ls0 ws0">服务器保持</div><div class="t m1 x6 h17 y18 ffb fs6 fc0 sc1 ls0 ws0">连接多长时间（秒）。</div><div class="t m1 x6 h17 y19 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y19 ffc fs4 fc0 sc1 ls0 ws0">Keep-Alive</div><div class="t m1 x19 h17 y19 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x2c h18 y19 ffc fs4 fc0 sc1 ls0 ws0">300</div><div class="t m0 x6 h18 y1b ffc fs4 fc0 sc1 ls0 ws0">Content-Encoding</div><div class="t m1 x57 h17 y1b ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x63 h18 y1b ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x1f h17 y1b ffb fs6 fc0 sc1 ls0 ws0">服务器表明自己使用了什么压缩方法（</div><div class="t m0 x90 h18 y1b ffc fs4 fc0 sc1 ls0 ws0">gzip</div><div class="t m1 x91 h17 y1b ffb fs6 fc0 sc1 ls0 ws0">，</div><div class="t m0 x92 h18 y1b ffc fs4 fc0 sc1 ls0 ws0">deflate</div><div class="t m1 x70 h17 y1b ffb fs6 fc0 sc1 ls0 ws0">）<span class="_ _10"></span>压缩响应</div><div class="t m1 x6 h17 yc9 ffb fs6 fc0 sc1 ls0 ws0">中的对象。</div><div class="t m1 x6 h17 y4e ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y4e ffc fs4 fc0 sc1 ls0 ws0">Content-Encoding</div><div class="t m1 x2d h17 y4e ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x2e h18 y4e ffc fs4 fc0 sc1 ls0 ws0">gzip</div><div class="t m0 x6 h18 yca ffc fs4 fc0 sc1 ls0 ws0">Content-Language</div><div class="t m1 x3d h17 yca ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x2c h18 yca ffc fs4 fc0 sc1 ls0 ws0">WEB </div><div class="t m1 x69 h17 yca ffb fs6 fc0 sc1 ls0 ws0">服务器告诉浏览器自己响应的对象的语言。</div><div class="t m0 x6 h18 y73 ffc fs4 fc0 sc1 ls0 ws0">Content-Length</div><div class="t m1 x2b h17 y73 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x57 h18 y73 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x2d h17 y73 ffb fs6 fc0 sc1 ls0 ws0">服务器告诉浏览器自己响应的对象的长度。</div><div class="t m1 x6 h17 y50 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y50 ffc fs4 fc0 sc1 ls0 ws0">Content-Length: 26012</div><div class="t m0 x6 h18 ycb ffc fs4 fc0 sc1 ls0 ws0">Content-Range</div><div class="t m1 x18 h17 ycb ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x12 h18 ycb ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x52 h17 ycb ffb fs6 fc0 sc1 ls0 ws0">服务器表明该响应包含的部分对象为整个对象的哪个部分。</div><div class="t m1 x6 h17 y51 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y51 ffc fs4 fc0 sc1 ls0 ws0">Content-Range: bytes 21010-47021/47022</div><div class="t m0 x6 h18 y52 ffc fs4 fc0 sc1 ls0 ws0">Content-Type</div><div class="t m1 x93 h17 y52 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x94 h18 y52 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x32 h17 y52 ffb fs6 fc0 sc1 ls0 ws0">服务器告诉浏览器自己响应的对象的类型。</div><div class="t m1 x6 h17 y53 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y53 ffc fs4 fc0 sc1 ls0 ws0">Content-Type</div><div class="t m1 x2c h17 y53 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x32 h18 y53 ffc fs4 fc0 sc1 ls0 ws0">application/xml</div><div class="t m0 x6 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">ETag</div><div class="t m1 x95 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">：就是一个对象（比如</div><div class="t m0 x96 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">URL</div><div class="t m1 x97 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">）的标志值，就一个对象而言，比如一个</div><div class="t m0 x98 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">  html </div><div class="t m1 x42 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">文件，</div><div class="t m1 x6 h17 ybc ffb fs6 fc0 sc1 ls0 ws0">如果被修改了，其</div><div class="t m0 x1e h18 ybc ffc fs4 fc0 sc1 ls0 ws0">  Etag </div><div class="t m1 x14 h17 ybc ffb fs6 fc0 sc1 ls0 ws0">也会别修改，</div><div class="t m0 x47 h18 ybc ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 xc h17 ybc ffb fs6 fc0 sc1 ls0 ws0">所以，</div><div class="t m0 x99 h18 ybc ffc fs4 fc0 sc1 ls0 ws0">ETag </div><div class="t m1 x6f h17 ybc ffb fs6 fc0 sc1 ls0 ws0">的作用跟</div><div class="t m0 x9a h18 ybc ffc fs4 fc0 sc1 ls0 ws0">  Last-Modified </div><div class="t m1 x28 h17 ybc ffb fs6 fc0 sc1 ls0 ws0">的</div><div class="t m1 x6 h17 y35 ffb fs6 fc0 sc1 ls0 ws0">作用差不多，主要供</div><div class="t m0 x43 h18 y35 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x76 h17 y35 ffb fs6 fc0 sc1 ls0 ws0">服务器</div><div class="t m0 x9b h18 y35 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x7c h17 y35 ffb fs6 fc0 sc1 ls0 ws0">判断一个对象是否改变了。</div><div class="t m1 x6 h17 y7c ffb fs6 fc0 sc1 ls0 ws0">比如前一次请求某个</div><div class="t m0 x43 h18 y7c ffc fs4 fc0 sc1 ls0 ws0">  html </div><div class="t m1 x2f h17 y7c ffb fs6 fc0 sc1 ls0 ws0">文件时，获得了其</div><div class="t m0 x9c h18 y7c ffc fs4 fc0 sc1 ls0 ws0">  ETag</div><div class="t m1 x85 h17 y7c ffb fs6 fc0 sc1 ls0 ws0">，当这次又请求这个文件时，</div><div class="t m1 x6 h17 yc1 ffb fs6 fc0 sc1 ls0 ws0">浏览器就会把先前获得的</div><div class="t m0 x69 h18 yc1 ffc fs4 fc0 sc1 ls0 ws0">  ETag </div><div class="t m1 x75 h17 yc1 ffb fs6 fc0 sc1 ls0 ws0">值发送给</div><div class="t m0 x5 h18 yc1 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x9d h17 yc1 ffb fs6 fc0 sc1 ls0 ws0">服务器，然后</div><div class="t m0 x86 h18 yc1 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x7f h17 yc1 ffb fs6 fc0 sc1 ls0 ws0">服务器</div><div class="t m1 x6 h17 y7d ffb fs6 fc0 sc1 ls0 ws0">会把这个</div><div class="t m0 x9e h18 y7d ffc fs4 fc0 sc1 ls0 ws0">  ETag </div><div class="t m1 x57 h17 y7d ffb fs6 fc0 sc1 ls0 ws0">跟该文件的当前</div><div class="t m0 x75 h18 y7d ffc fs4 fc0 sc1 ls0 ws0">  ETag </div><div class="t m1 x4e h17 y7d ffb fs6 fc0 sc1 ls0 ws0">进行对比，然后就知道这个文件</div><div class="t m1 x6 h17 ycc ffb fs6 fc0 sc1 ls0 ws0">有没有改变了。</div><div class="t m0 x6 h18 y7f ffc fs4 fc0 sc1 ls0 ws0">Expired</div><div class="t m1 x9f h17 y7f ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 xa0 h18 y7f ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x94 h17 y7f ffb fs6 fc0 sc1 ls0 ws0">服务器表明该实体将在什么时候过期，对于过期了的对象，只有在</div><div class="t m1 x6 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">跟</div><div class="t m0 x5e h18 y65 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x24 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">服务器验证了其有效性后，才能用来响应客户请求。</div><div class="t m1 x6 h17 y3c ffb fs6 fc0 sc1 ls0 ws0">是</div><div class="t m0 x1c h18 y3c ffc fs4 fc0 sc1 ls0 ws0">  HTTP/1.0 </div><div class="t m1 x18 h17 y3c ffb fs6 fc0 sc1 ls0 ws0">的头部。</div><div class="t m1 x6 h17 y3d ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y3d ffc fs4 fc0 sc1 ls0 ws0">Expires</div><div class="t m1 x18 h17 y3d ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x12 h18 y3d ffc fs4 fc0 sc1 ls0 ws0">Sat, 23 May 2009 10:02:12 GMT</div><div class="t m0 x6 h18 y44 ffc fs4 fc0 sc1 ls0 ws0">Host</div><div class="t m1 xa1 h17 y44 ffb fs6 fc0 sc1 ls0 ws0">：客户端指定自己想访问的</div><div class="t m0 x75 h18 y44 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x1a h17 y44 ffb fs6 fc0 sc1 ls0 ws0">服务器的域名</div><div class="t m0 x85 h18 y44 ffc fs4 fc0 sc1 ls0 ws0">/IP </div><div class="t m1 xa2 h17 y44 ffb fs6 fc0 sc1 ls0 ws0">地址和端口号。</div><div class="t m1 x6 h17 y67 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y67 ffc fs4 fc0 sc1 ls0 ws0">Host</div><div class="t m1 xa3 h17 y67 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 xa4 h18 y67 ffc fs4 fc0 sc1 ls0 ws0">rss.sina.com.cn</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf15" class="pf w0 h0" data-page-no="15"><div class="pc pc15 w0 h0"><img class="bi x3 yc8 w8 h23" alt="" src="bg15.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 20 -</div></div><div class="t m0 x6 h18 y6a ffc fs4 fc0 sc1 ls0 ws0">If-Match</div><div class="t m1 x5f h17 y6a ffb fs6 fc0 sc1 ls0 ws0">：如果对象的</div><div class="t m0 x32 h18 y6a ffc fs4 fc0 sc1 ls0 ws0">  ETag </div><div class="t m1 xa5 h17 y6a ffb fs6 fc0 sc1 ls0 ws0">没有改变，其<span class="_ _0"></span>实也就意味著对象没有<span class="_ _0"></span>改变，才执行请求的</div><div class="t m1 x6 h17 y26 ffb fs6 fc0 sc1 ls0 ws0">动作。</div><div class="t m0 x6 h18 yf ffc fs4 fc0 sc1 ls0 ws0">If-None-Match</div><div class="t m1 xa4 h17 yf ffb fs6 fc0 sc1 ls0 ws0">：如果对象的</div><div class="t m0 xa6 h18 yf ffc fs4 fc0 sc1 ls0 ws0">  ETag </div><div class="t m1 x9b h17 yf ffb fs6 fc0 sc1 ls0 ws0">改变了，其实也就意味著对象也改变了，才执行请求</div><div class="t m1 x6 h17 y10 ffb fs6 fc0 sc1 ls0 ws0">的动作。</div><div class="t m0 x6 h18 y12 ffc fs4 fc0 sc1 ls0 ws0">If-Modified-Since</div><div class="t m1 x12 h17 y12 ffb fs6 fc0 sc1 ls0 ws0">：如果请求的对象在该头部指定的时间之后修改了，才执行请求</div><div class="t m1 x6 h17 y13 ffb fs6 fc0 sc1 ls0 ws0">的动作（比如返回对象），否则返回代码</div><div class="t m0 x5 h18 y13 ffc fs4 fc0 sc1 ls0 ws0">304</div><div class="t m1 x9c h17 y13 ffb fs6 fc0 sc1 ls0 ws0">，告诉浏览器该对象</div><div class="t m1 x6 h17 y14 ffb fs6 fc0 sc1 ls0 ws0">没有修改。</div><div class="t m1 x6 h17 y28 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y28 ffc fs4 fc0 sc1 ls0 ws0">If-Modified-Since</div><div class="t m1 x33 h17 y28 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x69 h18 y28 ffc fs4 fc0 sc1 ls0 ws0">Thu, 10 Apr 2008 09:14:42 GMT</div><div class="t m0 x6 h18 ya9 ffc fs4 fc0 sc1 ls0 ws0">If-Unmodified-Since</div><div class="t m1 xa7 h17 ya9 ffb fs6 fc0 sc1 ls0 ws0">：如果请求的对象在该头部指定的时间之后没修改过，才执行</div><div class="t m1 x6 h17 y15 ffb fs6 fc0 sc1 ls0 ws0">请求的动作（比如返回对象）。</div><div class="t m0 x6 h18 y17 ffc fs4 fc0 sc1 ls0 ws0">If-Range</div><div class="t m1 x5f h17 y17 ffb fs6 fc0 sc1 ls0 ws0">：浏览器告诉</div><div class="t m0 x32 h18 y17 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x34 h17 y17 ffb fs6 fc0 sc1 ls0 ws0">服务器，如果我请求的对象没有改变，就把我缺少的部分</div><div class="t m1 x6 h17 y71 ffb fs6 fc0 sc1 ls0 ws0">给我，如果对象改变了，就把整个对象给我。</div><div class="t m0 x48 h18 y71 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 xa8 h17 y71 ffb fs6 fc0 sc1 ls0 ws0">浏览器通过发送请求对象的</div><div class="t m0 x6 h18 y18 ffc fs4 fc0 sc1 ls0 ws0">ETag </div><div class="t m1 x6e h17 y18 ffb fs6 fc0 sc1 ls0 ws0">或者</div><div class="t m0 x8d h18 y18 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 xa9 h17 y18 ffb fs6 fc0 sc1 ls0 ws0">自己所知道的最后修改时间给</div><div class="t m0 x5 h18 y18 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x9d h17 y18 ffb fs6 fc0 sc1 ls0 ws0">服务器，让其判断对象是否</div><div class="t m1 x6 h17 y19 ffb fs6 fc0 sc1 ls0 ws0">改变了。</div><div class="t m1 x6 h17 y1a ffb fs6 fc0 sc1 ls0 ws0">总是跟</div><div class="t m0 x87 h18 y1a ffc fs4 fc0 sc1 ls0 ws0">  Range </div><div class="t m1 xaa h17 y1a ffb fs6 fc0 sc1 ls0 ws0">头部一起使用。</div><div class="t m0 x6 h18 y1c ffc fs4 fc0 sc1 ls0 ws0">Last-Modified</div><div class="t m1 x8c h17 y1c ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x1d h18 y1c ffc fs4 fc0 sc1 ls0 ws0">WEB </div><div class="t m1 x68 h17 y1c ffb fs6 fc0 sc1 ls0 ws0">服务器认为对象的最后修改时间，比如文件的最后修改时间，</div><div class="t m1 x6 h17 y4e ffb fs6 fc0 sc1 ls0 ws0">动态页面的最后产生时间等等。</div><div class="t m1 x6 h17 yca ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 yca ffc fs4 fc0 sc1 ls0 ws0">Last-Modified</div><div class="t m1 x3e h17 yca ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x25 h18 yca ffc fs4 fc0 sc1 ls0 ws0">Tue, 06 May 2008 02:42:43 GMT</div><div class="t m0 x6 h18 y50 ffc fs4 fc0 sc1 ls0 ws0">Location</div><div class="t m1 x24 h17 y50 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x29 h18 y50 ffc fs4 fc0 sc1 ls0 ws0">WEB </div><div class="t m1 xab h17 y50 ffb fs6 fc0 sc1 ls0 ws0">服务器告诉浏览器，试图访问的对象已经被移到别的位置了，</div><div class="t m1 x6 h17 ycb ffb fs6 fc0 sc1 ls0 ws0">到该头部指定的位置去取。</div><div class="t m1 x6 h17 y51 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y51 ffc fs4 fc0 sc1 ls0 ws0">Location</div><div class="t m1 xaa h17 y51 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x6 h18 y83 ffc fs4 fc0 sc1 ls0 ws0">http://i0.sinaimg.cn/dy/deco/2008/0528/sinahome_0803_ws_005_text_0.gif</div><div class="t m0 x6 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">Pramga</div><div class="t m1 x9f h17 y33 ffb fs6 fc0 sc1 ls0 ws0">：主要使用</div><div class="t m0 xa7 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">  Pramga: no-cache</div><div class="t m1 x59 h17 y33 ffb fs6 fc0 sc1 ls0 ws0">，相当于</div><div class="t m0 xac h18 y33 ffc fs4 fc0 sc1 ls0 ws0">  Cache-Control</div><div class="t m1 xad h17 y33 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x90 h18 y33 ffc fs4 fc0 sc1 ls0 ws0">  no-cache</div><div class="t m1 x5d h17 y33 ffb fs6 fc0 sc1 ls0 ws0">。</div><div class="t m1 x6 h17 y34 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">Pragma</div><div class="t m1 x2b h17 y34 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x57 h18 y34 ffc fs4 fc0 sc1 ls0 ws0">no-cache</div><div class="t m0 x6 h18 y35 ffc fs4 fc0 sc1 ls0 ws0">Proxy-Authenticate</div><div class="t m1 x71 h17 y35 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 xae h18 y35 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x68 h17 y35 ffb fs6 fc0 sc1 ls0 ws0">代理服务器响应浏览器，要求其提供代理身份验证信息。</div><div class="t m0 x6 h18 y7c ffc fs4 fc0 sc1 ls0 ws0">Proxy-Authorization</div><div class="t m1 xa7 h17 y7c ffb fs6 fc0 sc1 ls0 ws0">：浏览器响应代理服务器的身份验证请求，提供自己的身份信息。</div><div class="t m0 x6 h18 y7d ffc fs4 fc0 sc1 ls0 ws0">Range</div><div class="t m1 x6a h17 y7d ffb fs6 fc0 sc1 ls0 ws0">：浏览器（比如</div><div class="t m0 xaf h18 y7d ffc fs4 fc0 sc1 ls0 ws0">  Flashget </div><div class="t m1 x80 h17 y7d ffb fs6 fc0 sc1 ls0 ws0">多线程下载时）告诉</div><div class="t m0 x6f h18 y7d ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 xb0 h17 y7d ffb fs6 fc0 sc1 ls0 ws0">服务器自己想取对象的哪部</div><div class="t m1 x6 h17 yc6 ffb fs6 fc0 sc1 ls0 ws0">分。</div><div class="t m1 x6 h17 y7e ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y7e ffc fs4 fc0 sc1 ls0 ws0">Range: bytes=1173546-</div><div class="t m0 x6 h18 y65 ffc fs4 fc0 sc1 ls0 ws0">Referer</div><div class="t m1 x87 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">：浏览器向</div><div class="t m0 x1e h18 y65 ffc fs4 fc0 sc1 ls0 ws0">  WEB </div><div class="t m1 x69 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">服务器表明自己是从哪个</div><div class="t m0 x7b h18 y65 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 xb1 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">网页</div><div class="t m0 x62 h18 y65 ffc fs4 fc0 sc1 ls0 ws0">/URL </div><div class="t m1 x86 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">获得</div><div class="t m0 xb2 h18 y65 ffc fs4 fc0 sc1 ls0 ws0">/</div><div class="t m1 x22 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">点击</div><div class="t m0 xb3 h18 y65 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 xb4 h17 y65 ffb fs6 fc0 sc1 ls0 ws0">当前请求中的</div><div class="t m1 x6 h17 y66 ffb fs6 fc0 sc1 ls0 ws0">网址</div><div class="t m0 x7 h18 y66 ffc fs4 fc0 sc1 ls0 ws0">/URL</div><div class="t m1 xa0 h17 y66 ffb fs6 fc0 sc1 ls0 ws0">。</div><div class="t m1 x6 h17 y3d ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y3d ffc fs4 fc0 sc1 ls0 ws0">Referer</div><div class="t m1 x18 h17 y3d ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x12 h18 y3d ffc fs4 fc0 sc1 ls0 ws0">http://www.sina.com/</div><div class="t m0 x6 h18 y44 ffc fs4 fc0 sc1 ls0 ws0">Server: WEB </div><div class="t m1 x2a h17 y44 ffb fs6 fc0 sc1 ls0 ws0">服务器表明自己是什么软件及版本等信息。</div><div class="t m1 x6 h17 y67 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y67 ffc fs4 fc0 sc1 ls0 ws0">Server</div><div class="t m1 x4c h17 y67 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 xaa h18 y67 ffc fs4 fc0 sc1 ls0 ws0">Apache/2.0.61 (Unix)</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf16" class="pf w0 h0" data-page-no="16"><div class="pc pc16 w0 h0"><img class="bi x3 ycd w9 h24" alt="" src="bg16.png"/><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 21 -</div></div><div class="t m0 x6 h18 y6a ffc fs4 fc0 sc1 ls0 ws0">User-Agent: </div><div class="t m1 x93 h17 y6a ffb fs6 fc0 sc1 ls0 ws0">浏览器表明自己的身份（是哪种浏览器）。</div><div class="t m1 x6 h17 y26 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y26 ffc fs4 fc0 sc1 ls0 ws0">User-Agent</div><div class="t m1 x60 h17 y26 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x3e h18 y26 ffc fs4 fc0 sc1 ls0 ws0">Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN;</div><div class="t m0 x6 h18 y96 ffc fs4 fc0 sc1 ls0 ws0">rv:1.8.1.14) Gecko/20080404 Firefox/2.0.0.14</div><div class="t m0 x6 h18 y11 ffc fs4 fc0 sc1 ls0 ws0">Transfer-Encoding: WEB </div><div class="t m1 xb5 h17 y11 ffb fs6 fc0 sc1 ls0 ws0">服务器表明自己对本响应消息体（不是消息体里面的对象）</div><div class="t m1 x6 h17 y12 ffb fs6 fc0 sc1 ls0 ws0">作了怎样的编码，比如是否分块（</div><div class="t m0 x9b h18 y12 ffc fs4 fc0 sc1 ls0 ws0">chunked</div><div class="t m1 xb6 h17 y12 ffb fs6 fc0 sc1 ls0 ws0">）。</div><div class="t m1 x6 h17 y13 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y13 ffc fs4 fc0 sc1 ls0 ws0">Transfer-Encoding: chunked</div><div class="t m0 x6 h18 y28 ffc fs4 fc0 sc1 ls0 ws0">Vary: WEB</div><div class="t m1 xa3 h17 y28 ffb fs6 fc0 sc1 ls0 ws0">服务器用该头部的内容告诉</div><div class="t m0 xb7 h18 y28 ffc fs4 fc0 sc1 ls0 ws0">  Cache </div><div class="t m1 x99 h17 y28 ffb fs6 fc0 sc1 ls0 ws0">服务器，在什么条件下才能用本响应</div><div class="t m1 x6 h17 ya9 ffb fs6 fc0 sc1 ls0 ws0">所返回的对象响应后续的请求。</div><div class="t m1 x6 h17 y15 ffb fs6 fc0 sc1 ls0 ws0">假如源</div><div class="t m0 xb8 h18 y15 ffc fs4 fc0 sc1 ls0 ws0">WEB</div><div class="t m1 x4c h17 y15 ffb fs6 fc0 sc1 ls0 ws0">服务器在接到第一个请求消息时，其响应消息的头部为：</div><div class="t m0 x6 h18 y16 ffc fs4 fc0 sc1 ls0 ws0">Content-Encoding: gzip; Vary: Content-Encoding </div><div class="t m1 xa8 h17 y16 ffb fs6 fc0 sc1 ls0 ws0">那么</div><div class="t m0 xb1 h18 y16 ffc fs4 fc0 sc1 ls0 ws0">  Cache </div><div class="t m1 xb0 h17 y16 ffb fs6 fc0 sc1 ls0 ws0">服务器会分析后续</div><div class="t m1 x6 h17 y17 ffb fs6 fc0 sc1 ls0 ws0">请求消息的头部，检查其</div><div class="t m0 x69 h18 y17 ffc fs4 fc0 sc1 ls0 ws0">  Accept-Encoding</div><div class="t m1 xb6 h17 y17 ffb fs6 fc0 sc1 ls0 ws0">，是否跟先前响应的</div><div class="t m0 xb9 h18 y17 ffc fs4 fc0 sc1 ls0 ws0">  Vary </div><div class="t m1 x92 h17 y17 ffb fs6 fc0 sc1 ls0 ws0">头部值</div><div class="t m1 x6 h17 y71 ffb fs6 fc0 sc1 ls0 ws0">一致，即是否使用相同的内容编码方法，这样就可以防止</div><div class="t m0 xba h18 y71 ffc fs4 fc0 sc1 ls0 ws0">  Cache </div><div class="t m1 x56 h17 y71 ffb fs6 fc0 sc1 ls0 ws0">服务器用自己</div><div class="t m0 x6 h18 y18 ffc fs4 fc0 sc1 ls0 ws0">Cache </div><div class="t m1 x87 h17 y18 ffb fs6 fc0 sc1 ls0 ws0">里面压缩后的实体响应给不具备解压能力的浏览器。</div><div class="t m1 x6 h17 y19 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y19 ffc fs4 fc0 sc1 ls0 ws0">Vary</div><div class="t m1 xa3 h17 y19 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 xa4 h18 y19 ffc fs4 fc0 sc1 ls0 ws0">Accept-Encoding</div><div class="t m0 x6 h18 y1b ffc fs4 fc0 sc1 ls0 ws0">Via</div><div class="t m1 x2 h17 y1b ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x1 h18 y1b ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x8a h17 y1b ffb fs6 fc0 sc1 ls0 ws0">列出从客户端到</div><div class="t m0 x13 h18 y1b ffc fs4 fc0 sc1 ls0 ws0">  OCS </div><div class="t m1 xa5 h17 y1b ffb fs6 fc0 sc1 ls0 ws0">或者相反方向的响应经过了哪些代理服务器，他们用</div><div class="t m1 x6 h17 y1c ffb fs6 fc0 sc1 ls0 ws0">什么协议（和版本）发送的请求。</div><div class="t m1 x6 h17 y4e ffb fs6 fc0 sc1 ls0 ws0">当客户端请求到达第一个代理服务器时，该服务器会在自己发出的请求里面</div><div class="t m1 x6 h17 yca ffb fs6 fc0 sc1 ls0 ws0">添加</div><div class="t m0 x7 h18 yca ffc fs4 fc0 sc1 ls0 ws0">  Via </div><div class="t m1 x83 h17 yca ffb fs6 fc0 sc1 ls0 ws0">头部，并填上自己的相关信息，当下一个代理服务器</div><div class="t m0 xb9 h18 yca ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x7e h17 yca ffb fs6 fc0 sc1 ls0 ws0">收到第一个代理</div><div class="t m1 x6 h17 y73 ffb fs6 fc0 sc1 ls0 ws0">服务器的请求时，会在自己发出的请求里面复制前一个代理服务器的请求的</div><div class="t m0 xbb h18 y73 ffc fs4 fc0 sc1 ls0 ws0">Via</div><div class="t m1 x6 h17 y50 ffb fs6 fc0 sc1 ls0 ws0">头部，并把自己的相关信息加到后面，</div><div class="t m0 x47 h18 y50 ffc fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 xbc h17 y50 ffb fs6 fc0 sc1 ls0 ws0">以此类推，当</div><div class="t m0 xbd h18 y50 ffc fs4 fc0 sc1 ls0 ws0">  OCS </div><div class="t m1 xbe h17 y50 ffb fs6 fc0 sc1 ls0 ws0">收到最后一个代理服</div><div class="t m1 x6 h17 ycb ffb fs6 fc0 sc1 ls0 ws0">务器的请求时，检查</div><div class="t m0 x43 h18 ycb ffc fs4 fc0 sc1 ls0 ws0">  Via </div><div class="t m1 x0 h17 ycb ffb fs6 fc0 sc1 ls0 ws0">头部，就知道该请求所经过的路由。</div><div class="t m1 x6 h17 y51 ffb fs6 fc0 sc1 ls0 ws0">例如：</div><div class="t m0 x87 h18 y51 ffc fs4 fc0 sc1 ls0 ws0">Via</div><div class="t m1 x83 h17 y51 ffb fs6 fc0 sc1 ls0 ws0">：</div><div class="t m0 x93 h18 y51 ffc fs4 fc0 sc1 ls0 ws0">1.0 236-81.D07071953.sina.com.cn:80 (squid/2.6.STABLE13)</div><div class="t m0 x6 h8 yce ff9 fs4 fc0 sc1 ls0 ws0">✍<span class="ff3">  <span class="ff4">建议：</span></span></div><div class="t m0 x6 h8 y35 ff3 fs4 fc0 sc1 ls0 ws0">HTTP  <span class="ff4">请求和应答的头部字段值得大家认真的学习，因为基于</span>  Web  <span class="ff4">的编程中我们将会</span></div><div class="t m0 x6 h8 y36 ff4 fs4 fc0 sc1 ls0 ws0">大量使用。如：将用户认证的令牌信息放到头部，或者把<span class="ff3">  cookie  </span>放到头部等。</div><div class="t m0 x6 h8 ycf ff9 fs4 fc0 sc1 ls0 ws0">✎<span class="ff3">  <span class="ff4">问题</span></span></div><div class="t m0 x6 h8 y7f ff4 fs4 fc0 sc1 ls0 ws0">刷新一次<span class="ff3">  qige.io  </span>网站的页面同时进行抓包，你会发现不少的<span class="ff3">  304  </span>代码的应答，这是所</div><div class="t m0 x6 h8 yc7 ff4 fs4 fc0 sc1 ls0 ws0">请求的对象没有更改的意思，<span class="_ _22"></span>让浏览器使用本地缓存的内容即可。<span class="_ _22"></span>那么服务器为什么会</div><div class="t m0 x6 h8 yd0 ff4 fs4 fc0 sc1 ls0 ws0">回答<span class="ff3">  304  </span>应答而不是常见的<span class="ff3">  200  </span>应答？</div><div class="t m0 x6 h1f y43 ff11 fs4 fc0 sc1 ls0 ws0">200</div><div class="t m1 x8 h17 y43 ff10 fs6 fc0 sc0 ls0 ws0">应答是指本<span class="_ _0"></span>次返回的数据接收成功</div><div class="t m0 x6 h1f y44 ff11 fs4 fc0 sc1 ls0 ws0">304</div><div class="t m1 x8 h17 y44 ff10 fs6 fc0 sc0 ls0 ws0">应答是指取<span class="_ _0"></span>缓存成功</div><div class="t m1 x6 h17 y67 ff10 fs6 fc0 sc0 ls0 ws0">缓存的文件<span class="_ _0"></span>有类似时间戳的记录</div><div class="t m0 x80 h1f y67 ff11 fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x20 h17 y67 ff10 fs6 fc0 sc0 ls0 ws0">如果和服务<span class="_ _0"></span>器相差时间较大</div><div class="t m0 xbf h1f y67 ff11 fs4 fc0 sc1 ls0 ws0"> </div><div class="t m1 x9a h17 y67 ff10 fs6 fc0 sc0 ls0 ws0">则拉取返回</div><div class="t m0 x98 h1f y67 ff11 fs4 fc0 sc1 ls0 ws0">200</div><div class="t m0 x6 h1f y68 ff11 fs4 fc0 sc1 ls0 ws0">304</div><div class="t m1 x8 h17 y68 ff10 fs6 fc0 sc0 ls0 ws0">代表缓存与</div><div class="t m0 x12 h1f y68 ff11 fs4 fc0 sc1 ls0 ws0">200</div><div class="t m1 xae h17 y68 ff10 fs6 fc0 sc0 ls0 ws0">区分文件状<span class="_ _0"></span>态</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf17" class="pf w0 h0" data-page-no="17"><div class="pc pc17 w0 h0"><div class="c x4 yc w3 h5"><div class="t m0 xa h6 yd ff5 fs2 fc0 sc1 ls0 ws0">- 22 -</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
</div>
<div class="loading-indicator">

</div>
</body>
</html>
